"use strict";var Candy=function(a,b){return a.about={name:"Candy",version:"2.2.0"},a.init=function(c,d){d.viewClass||(d.viewClass=a.View),d.viewClass.init(b("#candy"),d.view),a.Core.init(c,d.core)},a}(Candy||{},jQuery);Candy.Core=function(a,b,c){var d,e=null,f=null,g=null,h=null,i={},j=!1,k={autojoin:void 0,disconnectWithoutTabs:!0,conferenceDomain:void 0,debug:!1,domains:null,hideDomainList:!1,disableCoreNotifications:!1,disableWindowUnload:!1,presencePriority:1,resource:Candy.about.name,useParticipantRealJid:!1,initialRosterVersion:null,initialRosterItems:[]},l=function(a,c){b.addNamespace(a,c)},m=function(){l("PRIVATE","jabber:iq:private"),l("BOOKMARKS","storage:bookmarks"),l("PRIVACY","jabber:iq:privacy"),l("DELAY","urn:xmpp:delay"),l("JABBER_DELAY","jabber:x:delay"),l("PUBSUB","http://jabber.org/protocol/pubsub"),l("CARBONS","urn:xmpp:carbons:2")},n=function(a){var c=b.getNodeFromJid(a),d=b.getDomainFromJid(a);return c?b.escapeNode(c)+"@"+d:d};return a.init=function(d,g){f=d,c.extend(!0,k,g),k.debug&&(void 0!==typeof window.console&&void 0!==typeof window.console.log&&(Function.prototype.bind&&Candy.Util.getIeVersion()>8?a.log=Function.prototype.bind.call(console.log,console):a.log=function(){Function.prototype.apply.call(console.log,console,arguments)}),b.log=function(a,c){var d,e;switch(a){case b.LogLevel.DEBUG:d="DEBUG",e="log";break;case b.LogLevel.INFO:d="INFO",e="info";break;case b.LogLevel.WARN:d="WARN",e="info";break;case b.LogLevel.ERROR:d="ERROR",e="error";break;case b.LogLevel.FATAL:d="FATAL",e="error"}console[e]("[Strophe]["+d+"]: "+c)},a.log("[Init] Debugging enabled")),m(),h=new Candy.Core.ChatRoster,e=new b.Connection(f),e.rawInput=a.rawInput.bind(a),e.rawOutput=a.rawOutput.bind(a),e.caps.node="https://candy-chat.github.io/candy/",k.disableWindowUnload||(window.onbeforeunload=a.onWindowUnload)},a.registerEventHandlers=function(){a.addHandler(a.Event.Jabber.Version,b.NS.VERSION,"iq"),a.addHandler(a.Event.Jabber.Presence,null,"presence"),a.addHandler(a.Event.Jabber.Message,null,"message"),a.addHandler(a.Event.Jabber.Bookmarks,b.NS.PRIVATE,"iq"),a.addHandler(a.Event.Jabber.Room.Disco,b.NS.DISCO_INFO,"iq","result"),a.addHandler(e.disco._onDiscoInfo.bind(e.disco),b.NS.DISCO_INFO,"iq","get"),a.addHandler(e.disco._onDiscoItems.bind(e.disco),b.NS.DISCO_ITEMS,"iq","get"),a.addHandler(e.caps._delegateCapabilities.bind(e.caps),b.NS.CAPS)},a.connect=function(d,f,h){if(e.reset(),a.registerEventHandlers(),c(Candy).triggerHandler("candy:core.before-connect",{connection:e}),j=j?!0:d&&d.indexOf("@")<0,d&&f){var i=b.getResourceFromJid(d);i&&(k.resource=i),e.connect(n(d)+"/"+k.resource,f,Candy.Core.Event.Strophe.Connect),g=h?new a.ChatUser(d,h):new a.ChatUser(d,b.getNodeFromJid(d))}else d&&h?(e.connect(n(d)+"/"+k.resource,null,Candy.Core.Event.Strophe.Connect),g=new a.ChatUser(null,h)):d?Candy.Core.Event.Login(d):Candy.Core.Event.Login()},a.attach=function(c,d,f,h){g=h?new a.ChatUser(c,h):new a.ChatUser(c,b.getNodeFromJid(c)),e.reset(),a.registerEventHandlers(),e.attach(c,d,f,Candy.Core.Event.Strophe.Connect)},a.disconnect=function(){e.connected&&e.disconnect()},a.addHandler=function(a,b,c,d,f,g,h){return e.addHandler(a,b,c,d,f,g,h)},a.getRoster=function(){return h},a.getUser=function(){return g},a.setUser=function(a){g=a},a.getConnection=function(){return e},a.removeRoom=function(a){delete i[a]},a.getRooms=function(){return i},a.getStropheStatus=function(){return d},a.setStropheStatus=function(a){d=a},a.isAnonymousConnection=function(){return j},a.getOptions=function(){return k},a.getRoom=function(a){return i[a]?i[a]:null},a.onWindowUnload=function(){e.options.sync=!0,a.disconnect(),e.flush()},a.rawInput=function(a){this.log("RECV: "+a)},a.rawOutput=function(a){this.log("SENT: "+a)},a.log=function(){},a.warn=function(){Function.prototype.apply.call(console.warn,console,arguments)},a.error=function(){Function.prototype.apply.call(console.error,console,arguments)},a}(Candy.Core||{},Strophe,jQuery),Candy.View=function(a,b){var c={container:null,roomJid:null},d={language:"en",assets:"res/",messages:{limit:2e3,remove:500},crop:{message:{nickname:15,body:1e3,url:void 0},roster:{nickname:15}},enableXHTML:!1},e=function(c){b.i18n.load(a.Translation[c])},f=function(){b(Candy).on("candy:core.chat.connection",a.Observer.Chat.Connection),b(Candy).on("candy:core.chat.message",a.Observer.Chat.Message),b(Candy).on("candy:core.login",a.Observer.Login),b(Candy).on("candy:core.autojoin-missing",a.Observer.AutojoinMissing),b(Candy).on("candy:core.presence",a.Observer.Presence.update),b(Candy).on("candy:core.presence.leave",a.Observer.Presence.update),b(Candy).on("candy:core.presence.room",a.Observer.Presence.update),b(Candy).on("candy:core.presence.error",a.Observer.PresenceError),b(Candy).on("candy:core.message",a.Observer.Message)},g=function(){Candy.Util.getIeVersion()<9?b(document).focusin(Candy.View.Pane.Window.onFocus).focusout(Candy.View.Pane.Window.onBlur):b(window).focus(Candy.View.Pane.Window.onFocus).blur(Candy.View.Pane.Window.onBlur),b(window).resize(Candy.View.Pane.Chat.fitTabs)},h=function(){a.Pane.Chat.Toolbar.init()},i=function(){b("body").delegate("li[data-tooltip]","mouseenter",Candy.View.Pane.Chat.Tooltip.show)};return a.init=function(a,j){j.resources&&(j.assets=j.resources),delete j.resources,b.extend(!0,d,j),e(d.language),Candy.Util.Parser.setEmoticonPath(this.getOptions().assets+"img/emoticons/"),c.container=a,c.container.html(Mustache.to_html(Candy.View.Template.Chat.pane,{tooltipEmoticons:b.i18n._("tooltipEmoticons"),tooltipSound:b.i18n._("tooltipSound"),tooltipAutoscroll:b.i18n._("tooltipAutoscroll"),tooltipStatusmessage:b.i18n._("tooltipStatusmessage"),tooltipAdministration:b.i18n._("tooltipAdministration"),tooltipUsercount:b.i18n._("tooltipUsercount"),assetsPath:this.getOptions().assets},{tabs:Candy.View.Template.Chat.tabs,mobile:Candy.View.Template.Chat.mobileIcon,rooms:Candy.View.Template.Chat.rooms,modal:Candy.View.Template.Chat.modal,toolbar:Candy.View.Template.Chat.toolbar})),g(),h(),f(),i()},a.getCurrent=function(){return c},a.getOptions=function(){return d},a}(Candy.View||{},jQuery),Candy.Util=function(a,b){a.jidToId=function(a){return MD5.hexdigest(a)},a.escapeJid=function(a){var b=Strophe.escapeNode(Strophe.getNodeFromJid(a)),c=Strophe.getDomainFromJid(a),d=Strophe.getResourceFromJid(a);return a=b+"@"+c,d&&(a+="/"+d),a},a.unescapeJid=function(a){var b=Strophe.unescapeNode(Strophe.getNodeFromJid(a)),c=Strophe.getDomainFromJid(a),d=Strophe.getResourceFromJid(a);return a=b+"@"+c,d&&(a+="/"+d),a},a.crop=function(a,b){return a.length>b&&(a=a.substr(0,b-3)+"..."),a},a.parseAndCropXhtml=function(c,d){return b("<div/>").append(a.createHtml(b(c).get(0),d)).html()},a.setCookie=function(a,b,c){var d=new Date;d.setDate((new Date).getDate()+c),document.cookie=a+"="+b+";expires="+d.toUTCString()+";path=/"},a.cookieExists=function(a){return document.cookie.indexOf(a)>-1},a.getCookie=function(a){if(document.cookie){var b=new RegExp(escape(a)+"=([^;]*)","gm"),c=b.exec(document.cookie);if(c)return c[1]}},a.deleteCookie=function(a){document.cookie=a+"=;expires=Thu, 01-Jan-70 00:00:01 GMT;path=/"},a.getPosLeftAccordingToWindowBounds=function(a,c){var d=b(document).width(),e=a.outerWidth(),f=e-a.outerWidth(!0),g="left";return c+e>=d&&(c-=e-f,g="right"),{px:c,backgroundPositionAlignment:g}},a.getPosTopAccordingToWindowBounds=function(a,c){var d=b(document).height(),e=a.outerHeight(),f=e-a.outerHeight(!0),g="top";return c+e>=d&&(c-=e-f,g="bottom"),{px:c,backgroundPositionAlignment:g}},a.localizedTime=function(c){if(void 0===c)return void 0;var d;return d=c.toDateString?c:a.iso8601toDate(c),d.toDateString()===(new Date).toDateString()?d.format(b.i18n._("timeFormat")):d.format(b.i18n._("dateFormat"))},a.iso8601toDate=function(a){var b=Date.parse(a);if(isNaN(b)){var c=/^(\d{4}|[+\-]\d{6})-(\d{2})-(\d{2})(?:[T ](\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?))?/.exec(a);if(c){var d=0;return"Z"!==c[8]&&(d=60*+c[10]+ +c[11],"+"===c[9]&&(d=-d)),d-=(new Date).getTimezoneOffset(),new Date(+c[1],+c[2]-1,+c[3],+c[4],+c[5]+d,+c[6],c[7]?+c[7].substr(0,3):0)}b=Date.parse(a.replace(/^(\d{4})(\d{2})(\d{2})/,"$1-$2-$3")+"Z")}return new Date(b)},a.isEmptyObject=function(a){var b;for(b in a)if(a.hasOwnProperty(b))return!1;return!0},a.forceRedraw=function(a){a.css({display:"none"}),setTimeout(function(){this.css({display:"block"})}.bind(a),1)};var c=function(){for(var a,b=3,c=document.createElement("div"),d=c.getElementsByTagName("i");c.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",d[0];);return b>4?b:a}();return a.getIeVersion=function(){return c},a.isMobile=function(){var a=!1;return function(b){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|android|ipad|playbook|silk|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=!0)}(navigator.userAgent||navigator.vendor||window.opera),a},a.Parser={jid:function(a){var b=/^(([^@]+)@)?([^\/]+)(\/(.*))?$/i,c=a.match(b);if(!c)throw"not a valid jid ("+a+")";return{node:c[2],domain:c[3],resource:c[4]}},_emoticonPath:"",setEmoticonPath:function(a){this._emoticonPath=a},emoticons:[{plain:":)",regex:/((\s):-?\)|:-?\)(\s|$))/gm,image:"Smiling.png"},{plain:";)",regex:/((\s);-?\)|;-?\)(\s|$))/gm,image:"Winking.png"},{plain:":D",regex:/((\s):-?D|:-?D(\s|$))/gm,image:"Grinning.png"},{plain:";D",regex:/((\s);-?D|;-?D(\s|$))/gm,image:"Grinning_Winking.png"},{plain:":(",regex:/((\s):-?\(|:-?\((\s|$))/gm,image:"Unhappy.png"},{plain:"^^",regex:/((\s)\^\^|\^\^(\s|$))/gm,image:"Happy_3.png"},{plain:":P",regex:/((\s):-?P|:-?P(\s|$))/gim,image:"Tongue_Out.png"},{plain:";P",regex:/((\s);-?P|;-?P(\s|$))/gim,image:"Tongue_Out_Winking.png"},{plain:":S",regex:/((\s):-?S|:-?S(\s|$))/gim,image:"Confused.png"},{plain:":/",regex:/((\s):-?\/|:-?\/(\s|$))/gm,image:"Uncertain.png"},{plain:"8)",regex:/((\s)8-?\)|8-?\)(\s|$))/gm,image:"Sunglasses.png"},{plain:"$)",regex:/((\s)\$-?\)|\$-?\)(\s|$))/gm,image:"Greedy.png"},{plain:"oO",regex:/((\s)oO|oO(\s|$))/gm,image:"Huh.png"},{plain:":x",regex:/((\s):x|:x(\s|$))/gm,image:"Lips_Sealed.png"},{plain:":666:",regex:/((\s):666:|:666:(\s|$))/gm,image:"Devil.png"},{plain:"<3",regex:/((\s)&lt;3|&lt;3(\s|$))/gm,image:"Heart.png"}],emotify:function(a){var b;for(b=this.emoticons.length-1;b>=0;b--)a=a.replace(this.emoticons[b].regex,'$2<img class="emoticon" alt="$1" title="$1" src="'+this._emoticonPath+this.emoticons[b].image+'" />$3');return a},linkify:function(b){return b=b.replace(/(^|[^\/])(www\.[^\.]+\.[\S]+(\b|$))/gi,"$1http://$2"),b.replace(/(\b(?:(?:https?|ftp|file):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:1\d\d|2[01]\d|22[0-3]|[1-9]\d?)(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?)/gi,function(b,c){return'<a href="'+c+'" target="_blank">'+a.crop(c,Candy.View.getOptions().crop.message.url)+"</a>"})},escape:function(a){return b("<div/>").text(a).html()},nl2br:function(a){return a.replace(/\r\n|\r|\n/g,"<br />")},all:function(a){return a&&(a=this.escape(a),a=this.linkify(a),a=this.emotify(a),a=this.nl2br(a)),a}},a.createHtml=function(c,d,e){e=e||0;var f,g,h,i,j,k,l,m,n,o,p;if(c.nodeType===Strophe.ElementType.NORMAL)if(i=c.nodeName.toLowerCase(),Strophe.XHTML.validTag(i))try{for(g=b("<"+i+"/>"),f=0;f<Strophe.XHTML.attributes[i].length;f++)if(j=Strophe.XHTML.attributes[i][f],k=c.getAttribute(j),"undefined"!=typeof k&&null!==k&&""!==k&&k!==!1&&0!==k)if("style"===j&&"object"==typeof k&&"undefined"!=typeof k.cssText&&(k=k.cssText),"style"===j){for(l=[],m=k.split(";"),h=0;h<m.length;h++)n=m[h].split(":"),o=n[0].replace(/^\s*/,"").replace(/\s*$/,"").toLowerCase(),Strophe.XHTML.validCSS(o)&&(p=n[1].replace(/^\s*/,"").replace(/\s*$/,""),l.push(o+": "+p));l.length>0&&(k=l.join("; "),g.attr(j,k))}else g.attr(j,k);for(f=0;f<c.childNodes.length;f++)g.append(a.createHtml(c.childNodes[f],d,e))}catch(q){Candy.Core.warn("[Util:createHtml] Error while parsing XHTML:",q),g=Strophe.xmlTextNode("")}else for(g=Strophe.xmlGenerator().createDocumentFragment(),f=0;f<c.childNodes.length;f++)g.appendChild(a.createHtml(c.childNodes[f],d,e));else if(c.nodeType===Strophe.ElementType.FRAGMENT)for(g=Strophe.xmlGenerator().createDocumentFragment(),f=0;f<c.childNodes.length;f++)g.appendChild(a.createHtml(c.childNodes[f],d,e));else if(c.nodeType===Strophe.ElementType.TEXT){var r=c.nodeValue;e+=r.length,d&&e>d&&(r=r.substring(0,d)),r=Candy.Util.Parser.all(r),g=b.parseHTML(r)}return g},a}(Candy.Util||{},jQuery),Candy.Core.Action=function(a,b,c){return a.Jabber={Version:function(a){Candy.Core.getConnection().sendIQ($iq({type:"result",to:Candy.Util.escapeJid(a.attr("from")),from:Candy.Util.escapeJid(a.attr("to")),id:a.attr("id")}).c("query",{xmlns:b.NS.VERSION}).c("name",Candy.about.name).up().c("version",Candy.about.version).up().c("os",navigator.userAgent))},SetNickname:function(a,b){b=b instanceof Array?b:Candy.Core.getRooms();var d,e,f=Candy.Core.getConnection();c.each(b,function(b){d=Candy.Util.escapeJid(b+"/"+a),e=$pres({to:d,from:f.jid,id:"pres:"+f.getUniqueId()}),Candy.Core.getConnection().send(e)})},Roster:function(){var a=Candy.Core.getConnection().roster,b=Candy.Core.getOptions();a.registerCallback(Candy.Core.Event.Jabber.RosterPush),c.each(b.initialRosterItems,function(a,b){b.resources={}}),a.get(Candy.Core.Event.Jabber.RosterFetch,b.initialRosterVersion,b.initialRosterItems),Candy.Core.Event.Jabber.RosterLoad(a.items)},Presence:function(a,b){var c=Candy.Core.getConnection();a=a||{},a.id||(a.id="pres:"+c.getUniqueId());var d=$pres(a).c("priority").t(Candy.Core.getOptions().presencePriority.toString()).up().c("c",c.caps.generateCapsAttrs()).up();b&&d.node.appendChild(b.node),c.send(d.tree())},Services:function(){Candy.Core.getConnection().sendIQ($iq({type:"get",xmlns:b.NS.CLIENT}).c("query",{xmlns:b.NS.DISCO_ITEMS}).tree())},Autojoin:function(){if(Candy.Core.getOptions().autojoin===!0){Candy.Core.getConnection().sendIQ($iq({type:"get",xmlns:b.NS.CLIENT}).c("query",{xmlns:b.NS.PRIVATE}).c("storage",{xmlns:b.NS.BOOKMARKS}).tree());var d=Candy.Core.getConnection().getUniqueId("pubsub");Candy.Core.addHandler(Candy.Core.Event.Jabber.Bookmarks,b.NS.PUBSUB,"iq","result",d),Candy.Core.getConnection().sendIQ($iq({type:"get",id:d}).c("pubsub",{xmlns:b.NS.PUBSUB}).c("items",{node:b.NS.BOOKMARKS}).tree())}else c.isArray(Candy.Core.getOptions().autojoin)?c.each(Candy.Core.getOptions().autojoin,function(){a.Jabber.Room.Join.apply(null,this.valueOf().split(":",2))}):c(Candy).triggerHandler("candy:core.autojoin-missing")},EnableCarbons:function(){Candy.Core.getConnection().sendIQ($iq({type:"set"}).c("enable",{xmlns:b.NS.CARBONS}).tree())},ResetIgnoreList:function(){Candy.Core.getConnection().sendIQ($iq({type:"set",from:Candy.Core.getUser().getEscapedJid()}).c("query",{xmlns:b.NS.PRIVACY}).c("list",{name:"ignore"}).c("item",{action:"allow",order:"0"}).tree())},RemoveIgnoreList:function(){Candy.Core.getConnection().sendIQ($iq({type:"set",from:Candy.Core.getUser().getEscapedJid()}).c("query",{xmlns:b.NS.PRIVACY}).c("list",{name:"ignore"}).tree())},GetIgnoreList:function(){var a=$iq({type:"get",from:Candy.Core.getUser().getEscapedJid()}).c("query",{xmlns:b.NS.PRIVACY}).c("list",{name:"ignore"}).tree(),c=Candy.Core.getConnection().sendIQ(a);Candy.Core.addHandler(Candy.Core.Event.Jabber.PrivacyList,null,"iq",null,c)},SetIgnoreListActive:function(){Candy.Core.getConnection().sendIQ($iq({type:"set",from:Candy.Core.getUser().getEscapedJid()}).c("query",{xmlns:b.NS.PRIVACY}).c("active",{name:"ignore"}).tree())},GetJidIfAnonymous:function(){Candy.Core.getUser().getJid()||(Candy.Core.log("[Jabber] Anonymous login"),Candy.Core.getUser().data.jid=Candy.Core.getConnection().jid)},Room:{Join:function(c,d){a.Jabber.Room.Disco(c),c=Candy.Util.escapeJid(c);var e=Candy.Core.getConnection(),f=c+"/"+Candy.Core.getUser().getNick(),g=$pres({to:f,id:"pres:"+e.getUniqueId()}).c("x",{xmlns:b.NS.MUC});d&&g.c("password").t(d),g.up().c("c",e.caps.generateCapsAttrs()),e.send(g.tree())},Leave:function(a){var b=Candy.Core.getRoom(a).getUser();b&&Candy.Core.getConnection().muc.leave(a,b.getNick(),function(){})},Disco:function(a){Candy.Core.getConnection().sendIQ($iq({type:"get",from:Candy.Core.getUser().getEscapedJid(),to:Candy.Util.escapeJid(a)}).c("query",{xmlns:b.NS.DISCO_INFO}).tree())},Message:function(a,d,e,f){if(d=c.trim(d),""===d)return!1;var g=null;return"chat"===e&&(g=b.getResourceFromJid(a),a=b.getBareJidFromJid(a)),Candy.Core.getConnection().muc.message(a,g,d,f,e),!0},Invite:function(a,d,e,f){e=c.trim(e);var g=$msg({to:a}),h=g.c("x",{xmlns:b.NS.MUC_USER});c.each(d,function(a,c){c=b.getBareJidFromJid(c),h.c("invite",{to:c}),"undefined"!=typeof e&&""!==e&&h.c("reason",e)}),"undefined"!=typeof f&&""!==f&&h.c("password",f),Candy.Core.getConnection().send(g)},IgnoreUnignore:function(a){Candy.Core.getUser().addToOrRemoveFromPrivacyList("ignore",a),Candy.Core.Action.Jabber.Room.UpdatePrivacyList()},UpdatePrivacyList:function(){var a=Candy.Core.getUser(),b=$iq({type:"set",from:a.getEscapedJid()}).c("query",{xmlns:"jabber:iq:privacy"}).c("list",{name:"ignore"}),d=a.getPrivacyList("ignore");d.length>0?c.each(d,function(a,c){b.c("item",{type:"jid",value:Candy.Util.escapeJid(c),action:"deny",order:a}).c("message").up().up()}):b.c("item",{action:"allow",order:"0"}),Candy.Core.getConnection().sendIQ(b.tree())},Admin:{UserAction:function(a,c,d,e){a=Candy.Util.escapeJid(a),c=Candy.Util.escapeJid(c);var f={nick:b.getResourceFromJid(c)};switch(d){case"kick":f.role="none";break;case"ban":f.affiliation="outcast";break;default:return!1}return Candy.Core.getConnection().sendIQ($iq({type:"set",from:Candy.Core.getUser().getEscapedJid(),to:a}).c("query",{xmlns:b.NS.MUC_ADMIN}).c("item",f).c("reason").t(e).tree()),!0},SetSubject:function(a,b){Candy.Core.getConnection().muc.setTopic(Candy.Util.escapeJid(a),b)}}}},a}(Candy.Core.Action||{},Strophe,jQuery),Candy.Core.ChatRoom=function(a){this.room={jid:a,name:Strophe.getNodeFromJid(a)},this.user=null,this.roster=new Candy.Core.ChatRoster},Candy.Core.ChatRoom.prototype.setUser=function(a){this.user=a},Candy.Core.ChatRoom.prototype.getUser=function(){return this.user},Candy.Core.ChatRoom.prototype.getJid=function(){return this.room.jid},Candy.Core.ChatRoom.prototype.setName=function(a){this.room.name=a},Candy.Core.ChatRoom.prototype.getName=function(){return this.room.name},Candy.Core.ChatRoom.prototype.setRoster=function(a){this.roster=a},Candy.Core.ChatRoom.prototype.getRoster=function(){return this.roster},Candy.Core.ChatRoster=function(){this.items={}},Candy.Core.ChatRoster.prototype.add=function(a){this.items[a.getJid()]=a},Candy.Core.ChatRoster.prototype.remove=function(a){delete this.items[a]},Candy.Core.ChatRoster.prototype.get=function(a){return this.items[a]},Candy.Core.ChatRoster.prototype.getAll=function(){return this.items},Candy.Core.ChatUser=function(a,b,c,d,e){this.ROLE_MODERATOR="moderator",this.AFFILIATION_OWNER="owner",this.data={jid:a,realJid:e,nick:Strophe.unescapeNode(b),affiliation:c,role:d,privacyLists:{},customData:{},previousNick:void 0,status:"unavailable"}},Candy.Core.ChatUser.prototype.getJid=function(){return this.data.jid?Candy.Util.unescapeJid(this.data.jid):void 0},Candy.Core.ChatUser.prototype.getEscapedJid=function(){return Candy.Util.escapeJid(this.data.jid)},Candy.Core.ChatUser.prototype.setJid=function(a){this.data.jid=a},Candy.Core.ChatUser.prototype.getRealJid=function(){return this.data.realJid?Candy.Util.unescapeJid(this.data.realJid):void 0},Candy.Core.ChatUser.prototype.getNick=function(){return Strophe.unescapeNode(this.data.nick)},Candy.Core.ChatUser.prototype.setNick=function(a){this.data.nick=a},Candy.Core.ChatUser.prototype.getName=function(){var a=this.getContact();return a?a.getName():this.getNick()},Candy.Core.ChatUser.prototype.getRole=function(){return this.data.role},Candy.Core.ChatUser.prototype.setRole=function(a){this.data.role=a},Candy.Core.ChatUser.prototype.setAffiliation=function(a){this.data.affiliation=a},Candy.Core.ChatUser.prototype.getAffiliation=function(){return this.data.affiliation},Candy.Core.ChatUser.prototype.isModerator=function(){return this.getRole()===this.ROLE_MODERATOR||this.getAffiliation()===this.AFFILIATION_OWNER},Candy.Core.ChatUser.prototype.addToOrRemoveFromPrivacyList=function(a,b){this.data.privacyLists[a]||(this.data.privacyLists[a]=[]);var c=-1;return-1!==(c=this.data.privacyLists[a].indexOf(b))?this.data.privacyLists[a].splice(c,1):this.data.privacyLists[a].push(b),this.data.privacyLists[a]},Candy.Core.ChatUser.prototype.getPrivacyList=function(a){return this.data.privacyLists[a]||(this.data.privacyLists[a]=[]),this.data.privacyLists[a]},Candy.Core.ChatUser.prototype.setPrivacyLists=function(a){this.data.privacyLists=a},Candy.Core.ChatUser.prototype.isInPrivacyList=function(a,b){return this.data.privacyLists[a]?-1!==this.data.privacyLists[a].indexOf(b):!1},Candy.Core.ChatUser.prototype.setCustomData=function(a){this.data.customData=a},Candy.Core.ChatUser.prototype.getCustomData=function(){return this.data.customData},Candy.Core.ChatUser.prototype.setPreviousNick=function(a){this.data.previousNick=a},Candy.Core.ChatUser.prototype.getPreviousNick=function(){return this.data.previousNick},Candy.Core.ChatUser.prototype.getContact=function(){return Candy.Core.getRoster().get(Strophe.getBareJidFromJid(this.data.realJid))},Candy.Core.ChatUser.prototype.setStatus=function(a){this.data.status=a},Candy.Core.ChatUser.prototype.getStatus=function(){return this.data.status},Candy.Core.Contact=function(a){this.data=a},Candy.Core.Contact.prototype.getJid=function(){return this.data.jid?Candy.Util.unescapeJid(this.data.jid):void 0},Candy.Core.Contact.prototype.getEscapedJid=function(){return Candy.Util.escapeJid(this.data.jid)},Candy.Core.Contact.prototype.getName=function(){return this.data.name?Strophe.unescapeNode(this.data.name):this.getJid()},Candy.Core.Contact.prototype.getNick=Candy.Core.Contact.prototype.getName,Candy.Core.Contact.prototype.getSubscription=function(){return this.data.subscription?this.data.subscription:"none"},Candy.Core.Contact.prototype.getGroups=function(){return this.data.groups},Candy.Core.Contact.prototype.getStatus=function(){var a,b="unavailable",c=this;return $.each(this.data.resources,function(d,e){var f;f=void 0===e.priority||""===e.priority?0:parseInt(e.priority,10),(""===e.show||null===e.show||void 0===e.show)&&(e.show="available"),void 0===a||f>a?(b=e.show,a=f):a===f&&c._weightForStatus(b)>c._weightForStatus(e.show)&&(b=e.show)}),b},Candy.Core.Contact.prototype._weightForStatus=function(a){switch(a){case"chat":case"dnd":return 1;case"available":case"":return 2;case"away":return 3;case"xa":return 4;case"unavailable":return 5}},Candy.Core.Event=function(a,b,c){return a.Login=function(a){c(Candy).triggerHandler("candy:core.login",{presetJid:a})},a.Strophe={Connect:function(a){switch(Candy.Core.setStropheStatus(a),a){case b.Status.CONNECTED:Candy.Core.log("[Connection] Connected"),Candy.Core.Action.Jabber.GetJidIfAnonymous();case b.Status.ATTACHED:Candy.Core.log("[Connection] Attached"),c(Candy).on("candy:core:roster:fetched",function(){Candy.Core.Action.Jabber.Presence()}),Candy.Core.Action.Jabber.Roster(),Candy.Core.Action.Jabber.EnableCarbons(),Candy.Core.Action.Jabber.Autojoin(),Candy.Core.Action.Jabber.GetIgnoreList();break;case b.Status.DISCONNECTED:Candy.Core.log("[Connection] Disconnected");break;case b.Status.AUTHFAIL:Candy.Core.log("[Connection] Authentication failed");break;case b.Status.CONNECTING:Candy.Core.log("[Connection] Connecting");break;case b.Status.DISCONNECTING:Candy.Core.log("[Connection] Disconnecting");break;case b.Status.AUTHENTICATING:Candy.Core.log("[Connection] Authenticating");break;case b.Status.ERROR:case b.Status.CONNFAIL:Candy.Core.log("[Connection] Failed ("+a+")");break;default:Candy.Core.warn("[Connection] Unknown status received:",a)}c(Candy).triggerHandler("candy:core.chat.connection",{status:a})}},a.Jabber={Version:function(a){return Candy.Core.log("[Jabber] Version"),Candy.Core.Action.Jabber.Version(c(a)),!0},Presence:function(d){return Candy.Core.log("[Jabber] Presence"),d=c(d),d.children('x[xmlns^="'+b.NS.MUC+'"]').length>0?"error"===d.attr("type")?a.Jabber.Room.PresenceError(d):a.Jabber.Room.Presence(d):c(Candy).triggerHandler("candy:core.presence",{from:d.attr("from"),stanza:d}),!0},RosterLoad:function(b){return a.Jabber._addRosterItems(b),c(Candy).triggerHandler("candy:core:roster:loaded",{roster:Candy.Core.getRoster()}),!0},RosterFetch:function(b){return a.Jabber._addRosterItems(b),c(Candy).triggerHandler("candy:core:roster:fetched",{roster:Candy.Core.getRoster()}),!0},RosterPush:function(b,d){if(!d)return!0;if("remove"===d.subscription){var e=Candy.Core.getRoster().get(d.jid);Candy.Core.getRoster().remove(d.jid),c(Candy).triggerHandler("candy:core:roster:removed",{contact:e})}else{var f=Candy.Core.getRoster().get(d.jid);f?c(Candy).triggerHandler("candy:core:roster:updated",{contact:f}):(f=a.Jabber._addRosterItem(d),c(Candy).triggerHandler("candy:core:roster:added",{contact:f}))}return!0},_addRosterItem:function(a){var b=new Candy.Core.Contact(a);return Candy.Core.getRoster().add(b),b},_addRosterItems:function(b){c.each(b,function(b,c){a.Jabber._addRosterItem(c)})},Bookmarks:function(a){return Candy.Core.log("[Jabber] Bookmarks"),c("conference",a).each(function(){var a=c(this);a.attr("autojoin")&&Candy.Core.Action.Jabber.Room.Join(a.attr("jid"))}),!0},PrivacyList:function(b){Candy.Core.log("[Jabber] PrivacyList");var d=Candy.Core.getUser();return b=c(b),"result"===b.attr("type")?(c('list[name="ignore"] item',b).each(function(){var a=c(this);"deny"===a.attr("action")&&d.addToOrRemoveFromPrivacyList("ignore",a.attr("value"))}),Candy.Core.Action.Jabber.SetIgnoreListActive(),!1):a.Jabber.PrivacyListError(b)},PrivacyListError:function(a){return Candy.Core.log("[Jabber] PrivacyListError"),c('error[code="404"][type="cancel"] item-not-found',a)&&(Candy.Core.Action.Jabber.ResetIgnoreList(),Candy.Core.Action.Jabber.SetIgnoreListActive()),!1},Message:function(b){Candy.Core.log("[Jabber] Message"),b=c(b);var d=b.attr("type")||"normal";switch(d){case"normal":var e=a.Jabber._findInvite(b);e&&c(Candy).triggerHandler("candy:core:chat:invite",e),c(Candy).triggerHandler("candy:core:chat:message:normal",{type:d,message:b});break;case"headline":b.attr("to")?c(Candy).triggerHandler("candy:core.chat.message.server",{type:d,subject:b.children("subject").text(),message:b.children("body").text()}):c(Candy).triggerHandler("candy:core.chat.message.admin",{type:d,message:b.children("body").text()});break;case"groupchat":case"chat":case"error":a.Jabber.Room.Message(b);break;default:c(Candy).triggerHandler("candy:core:chat:message:other",{type:d,message:b})}return!0},_findInvite:function(a){var b,c=a.find("invite"),d=a.find('x[xmlns="jabber:x:conference"]');if(c.length>0){var e,f,g=a.find("password"),h=c.find("reason"),i=c.find("continue");""!==g.text()&&(e=g.text()),""!==h.text()&&(f=h.text()),b={roomJid:a.attr("from"),from:c.attr("from"),reason:f,password:e,continuedThread:i.attr("thread")}}return d.length>0&&(b={roomJid:d.attr("jid"),from:a.attr("from"),reason:d.attr("reason"),password:d.attr("password"),continuedThread:d.attr("thread")}),b},Room:{Disco:function(a){if(Candy.Core.log("[Jabber:Room] Disco"),a=c(a),!a.find('identity[category="conference"]').length)return!0;var d=b.getBareJidFromJid(Candy.Util.unescapeJid(a.attr("from")));Candy.Core.getRooms()[d]||(Candy.Core.getRooms()[d]=new Candy.Core.ChatRoom(d));var e=a.find("identity");if(e.length){var f=e.attr("name"),g=Candy.Core.getRoom(d);null===g.getName()&&g.setName(b.unescapeNode(f))}return!0},Presence:function(d){Candy.Core.log("[Jabber:Room] Presence");var e=Candy.Util.unescapeJid(d.attr("from")),f=b.getBareJidFromJid(e),g=d.attr("type"),h=a.Jabber.Room._msgHasStatusCode(d,201),i=a.Jabber.Room._msgHasStatusCode(d,210),j=a.Jabber.Room._msgHasStatusCode(d,303),k=Candy.Core.getRoom(f);k||(Candy.Core.getRooms()[f]=new Candy.Core.ChatRoom(f),k=Candy.Core.getRoom(f));var l,m,n,o=k.getRoster(),p=k.getUser()?k.getUser():Candy.Core.getUser(),q=d.find("show"),r=d.find("item");if("unavailable"!==g){if(o.get(e)){m=o.get(e);var s=r.attr("role"),t=r.attr("affiliation");m.setRole(s),m.setAffiliation(t),m.setStatus("available"),l="join"}else n=b.getResourceFromJid(e),m=new Candy.Core.ChatUser(e,n,r.attr("affiliation"),r.attr("role"),r.attr("jid")),null!==k.getUser()||Candy.Core.getUser().getNick()!==n&&!i||(k.setUser(m),p=m),m.setStatus("available"),o.add(m),l="join";q.length>0&&m.setStatus(q.text())}else if(m=o.get(e),o.remove(e),j)n=r.attr("nick"),l="nickchange",m.setPreviousNick(m.getNick()),m.setNick(n),m.setJid(b.getBareJidFromJid(e)+"/"+n),o.add(m);else if(l="leave","none"===r.attr("role")&&(a.Jabber.Room._msgHasStatusCode(d,307)?l="kick":a.Jabber.Room._msgHasStatusCode(d,301)&&(l="ban")),b.getResourceFromJid(e)===p.getNick())return a.Jabber.Room._selfLeave(d,e,f,k.getName(),l),!0;return c(Candy).triggerHandler("candy:core.presence.room",{roomJid:f,roomName:k.getName(),user:m,action:l,currentUser:p,isNewRoom:h}),!0},_msgHasStatusCode:function(a,b){return a.find('status[code="'+b+'"]').length>0},_selfLeave:function(a,d,e,f,g){Candy.Core.log("[Jabber:Room] Leave"),Candy.Core.removeRoom(e);var h,i,j=a.find("item");("kick"===g||"ban"===g)&&(h=j.find("reason").text(),i=j.find("actor").attr("jid"));var k=new Candy.Core.ChatUser(d,b.getResourceFromJid(d),j.attr("affiliation"),j.attr("role"));c(Candy).triggerHandler("candy:core.presence.leave",{roomJid:e,roomName:f,type:g,reason:h,actor:i,user:k})},PresenceError:function(a){Candy.Core.log("[Jabber:Room] Presence Error");var d=Candy.Util.unescapeJid(a.attr("from")),e=b.getBareJidFromJid(d),f=Candy.Core.getRooms()[e],g=f.getName();return Candy.Core.removeRoom(e),f=void 0,c(Candy).triggerHandler("candy:core.presence.error",{msg:a,type:a.children("error").children()[0].tagName.toLowerCase(),roomJid:e,roomName:g}),
!0},Message:function(d){Candy.Core.log("[Jabber:Room] Message");var e=!1,f=Candy.Util.unescapeJid(d.attr("from"));d.children('sent[xmlns="'+b.NS.CARBONS+'"]').length>0&&(e=!0,d=c(d.children("sent").children("forwarded").children("message")),f=Candy.Util.unescapeJid(d.attr("to"))),d.children('received[xmlns="'+b.NS.CARBONS+'"]').length>0&&(e=!0,d=c(d.children("received").children("forwarded").children("message")),f=Candy.Util.unescapeJid(d.attr("from")));var g,h,i,j,k,l,m;if(d.children("subject").length>0&&d.children("subject").text().length>0&&"groupchat"===d.attr("type"))g=Candy.Util.unescapeJid(b.getBareJidFromJid(f)),i=Candy.Util.unescapeJid(b.getBareJidFromJid(d.attr("from"))),h=b.getNodeFromJid(g),j={from:i,name:b.getNodeFromJid(i),body:d.children("subject").text(),type:"subject"};else if("error"===d.attr("type")){var n=d.children("error");n.children("text").length>0&&(g=f,h=b.getNodeFromJid(g),j={from:d.attr("from"),type:"info",body:n.children("text").text()})}else{if(!(d.children("body").length>0))return!0;if("chat"===d.attr("type")||"normal"===d.attr("type")){i=Candy.Util.unescapeJid(d.attr("from"));var o=b.getBareJidFromJid(f),p=b.getBareJidFromJid(i),q=!Candy.Core.getRoom(o);if(q){g=o;var r=Candy.Core.getRoster().get(o);h=r?r.getName():b.getNodeFromJid(o),m=p===Candy.Core.getUser().getJid()?Candy.Core.getUser():Candy.Core.getRoster().get(p),k=m?m.getName():b.getNodeFromJid(i)}else g=f,l=Candy.Core.getRoom(Candy.Util.unescapeJid(b.getBareJidFromJid(i))),m=l.getRoster().get(i),k=m?m.getName():b.getResourceFromJid(i),h=k;j={from:i,name:k,body:d.children("body").text(),type:d.attr("type"),isNoConferenceRoomJid:q}}else{i=Candy.Util.unescapeJid(d.attr("from")),g=Candy.Util.unescapeJid(b.getBareJidFromJid(f));var s=b.getResourceFromJid(f);if(s)l=Candy.Core.getRoom(g),h=l.getName(),m=s===Candy.Core.getUser().getNick()?Candy.Core.getUser():l.getRoster().get(i),k=m?m.getName():b.unescapeNode(s),j={from:g,name:k,body:d.children("body").text(),type:d.attr("type")};else{if(!Candy.Core.getRooms()[f])return!0;h="",j={from:g,name:"",body:d.children("body").text(),type:"info"}}}var t=d.children('html[xmlns="'+b.NS.XHTML_IM+'"]');if(t.length>0){var u=c(c("<div>").append(t.children("body").first().contents()).html());j.xhtmlMessage=u}a.Jabber.Room._checkForChatStateNotification(d,g,k)}var v=d.children('delay[xmlns="'+b.NS.DELAY+'"]');j.delay=!1,v.length<1?v=d.children('x[xmlns="'+b.NS.JABBER_DELAY+'"]'):j.delay=!0;var w=v.length>0?v.attr("stamp"):(new Date).toISOString();return c(Candy).triggerHandler("candy:core.message",{roomJid:g,roomName:h,message:j,timestamp:w,carbon:e,stanza:d}),!0},_checkForChatStateNotification:function(a,b,d){var e=a.children('*[xmlns="http://jabber.org/protocol/chatstates"]');e.length>0&&c(Candy).triggerHandler("candy:core:message:chatstate",{name:d,roomJid:b,chatstate:e[0].tagName})}}},a}(Candy.Core.Event||{},Strophe,jQuery),Candy.View.Observer=function(a,b){var c=!0;return a.Chat={Connection:function(a,d){var e="candy:view.connection.status-"+d.status;if(b(Candy).triggerHandler(e)===!1)return!1;switch(d.status){case Strophe.Status.CONNECTING:case Strophe.Status.AUTHENTICATING:Candy.View.Pane.Chat.Modal.show(b.i18n._("statusConnecting"),!1,!0);break;case Strophe.Status.ATTACHED:case Strophe.Status.CONNECTED:c===!0&&(Candy.View.Pane.Chat.Modal.show(b.i18n._("statusConnected")),Candy.View.Pane.Chat.Modal.hide());break;case Strophe.Status.DISCONNECTING:Candy.View.Pane.Chat.Modal.show(b.i18n._("statusDisconnecting"),!1,!0);break;case Strophe.Status.DISCONNECTED:var f=Candy.Core.isAnonymousConnection()?Strophe.getDomainFromJid(Candy.Core.getUser().getJid()):null;Candy.View.Pane.Chat.Modal.showLoginForm(b.i18n._("statusDisconnected"),f);break;case Strophe.Status.AUTHFAIL:Candy.View.Pane.Chat.Modal.showLoginForm(b.i18n._("statusAuthfail"));break;default:Candy.View.Pane.Chat.Modal.show(b.i18n._("status",d.status))}},Message:function(a,b){"message"===b.type?Candy.View.Pane.Chat.adminMessage(b.subject||"",b.message):("chat"===b.type||"groupchat"===b.type)&&Candy.View.Pane.Chat.onInfoMessage(Candy.View.getCurrent().roomJid,b.subject||"",b.message)}},a.Presence={update:function(c,d){if("leave"===d.type){var e=Candy.View.Pane.Room.getUser(d.roomJid);Candy.View.Pane.Room.close(d.roomJid),a.Presence.notifyPrivateChats(e,d.type)}else if("kick"===d.type||"ban"===d.type){var f,g=d.actor?Strophe.getNodeFromJid(d.actor):null,h=[d.roomName];switch(g&&h.push(g),d.type){case"kick":f=b.i18n._(g?"youHaveBeenKickedBy":"youHaveBeenKicked",h);break;case"ban":f=b.i18n._(g?"youHaveBeenBannedBy":"youHaveBeenBanned",h)}Candy.View.Pane.Chat.Modal.show(Mustache.to_html(Candy.View.Template.Chat.Context.adminMessageReason,{reason:d.reason,_action:f,_reason:b.i18n._("reasonWas",[d.reason])})),setTimeout(function(){Candy.View.Pane.Chat.Modal.hide(function(){Candy.View.Pane.Room.close(d.roomJid),a.Presence.notifyPrivateChats(d.user,d.type)})},5e3);var i={type:d.type,reason:d.reason,roomJid:d.roomJid,user:d.user};b(Candy).triggerHandler("candy:view.presence",[i])}else if(d.roomJid){if(d.roomJid=Candy.Util.unescapeJid(d.roomJid),!Candy.View.Pane.Chat.rooms[d.roomJid]){if(Candy.View.Pane.Room.init(d.roomJid,d.roomName)===!1)return!1;Candy.View.Pane.Room.show(d.roomJid)}Candy.View.Pane.Roster.update(d.roomJid,d.user,d.action,d.currentUser),Candy.View.Pane.Chat.rooms[d.user.getJid()]&&"nickchange"!==d.action&&(Candy.View.Pane.Roster.update(d.user.getJid(),d.user,d.action,d.currentUser),Candy.View.Pane.PrivateRoom.setStatus(d.user.getJid(),d.action))}else{var j=Strophe.getBareJidFromJid(d.from),k=Candy.View.Pane.Chat.rooms[j];if(!k)return!1;k.targetJid=j}},notifyPrivateChats:function(a,b){Candy.Core.log("[View:Observer] notify Private Chats");var c;for(c in Candy.View.Pane.Chat.rooms)Candy.View.Pane.Chat.rooms.hasOwnProperty(c)&&Candy.View.Pane.Room.getUser(c)&&a.getJid()===Candy.View.Pane.Room.getUser(c).getJid()&&(Candy.View.Pane.Roster.update(c,a,b,a),Candy.View.Pane.PrivateRoom.setStatus(c,b))}},a.PresenceError=function(a,c){switch(c.type){case"not-authorized":var d;c.msg.children("x").children("password").length>0&&(d=b.i18n._("passwordEnteredInvalid",[c.roomName])),Candy.View.Pane.Chat.Modal.showEnterPasswordForm(c.roomJid,c.roomName,d);break;case"conflict":Candy.View.Pane.Chat.Modal.showNicknameConflictForm(c.roomJid);break;case"registration-required":Candy.View.Pane.Chat.Modal.showError("errorMembersOnly",[c.roomName]);break;case"service-unavailable":Candy.View.Pane.Chat.Modal.showError("errorMaxOccupantsReached",[c.roomName])}},a.Message=function(a,b){if("subject"===b.message.type)Candy.View.Pane.Chat.rooms[b.roomJid]||(Candy.View.Pane.Room.init(b.roomJid,b.roomName),Candy.View.Pane.Room.show(b.roomJid)),Candy.View.Pane.Room.setSubject(b.roomJid,b.message.body);else if("info"===b.message.type)Candy.View.Pane.Chat.infoMessage(b.roomJid,null,b.message.body);else{"chat"!==b.message.type||Candy.View.Pane.Chat.rooms[b.roomJid]||Candy.View.Pane.PrivateRoom.open(b.roomJid,b.roomName,!1,b.message.isNoConferenceRoomJid);var c=Candy.View.Pane.Chat.rooms[b.roomJid];c.targetJid!==b.roomJid||b.carbon?c.targetJid===b.message.from||(c.targetJid=b.roomJid):c.targetJid=b.message.from,Candy.View.Pane.Message.show(b.roomJid,b.message.name,b.message.body,b.message.xhtmlMessage,b.timestamp,b.message.from,b.carbon,b.stanza)}},a.Login=function(a,b){Candy.View.Pane.Chat.Modal.showLoginForm(null,b.presetJid)},a.AutojoinMissing=function(){c=!1,Candy.View.Pane.Chat.Modal.showError("errorAutojoinMissing")},a}(Candy.View.Observer||{},jQuery),Candy.View.Pane=function(a,b){return a.Chat={rooms:[],addTab:function(c,d,e){var f=Candy.Util.jidToId(c),g={roomJid:c,roomName:d,roomType:e,roomId:f};if(b(Candy).triggerHandler("candy:view.pane.before-tab",g)===!1)return void event.preventDefault();var h=Mustache.to_html(Candy.View.Template.Chat.tab,{roomJid:c,roomId:f,name:d||Strophe.getNodeFromJid(c),privateUserChat:function(){return"chat"===e},roomType:e}),i=b(h).appendTo("#chat-tabs");i.click(a.Chat.tabClick),b("a.close",i).click(a.Chat.tabClose),a.Chat.fitTabs()},getTab:function(a){return b("#chat-tabs").children('li[data-roomjid="'+a+'"]')},removeTab:function(b){a.Chat.getTab(b).remove(),a.Chat.fitTabs()},setActiveTab:function(a){b("#chat-tabs").children().each(function(){var c=b(this);c.attr("data-roomjid")===a?c.addClass("active"):c.removeClass("active")})},increaseUnreadMessages:function(b){var c=this.getTab(b).find(".unread");c.show().text(""!==c.text()?parseInt(c.text(),10)+1:1),("chat"===a.Chat.rooms[b].type||Candy.View.getOptions().updateWindowOnAllMessages===!0)&&a.Window.increaseUnreadMessages()},clearUnreadMessages:function(b){var c=a.Chat.getTab(b).find(".unread");a.Window.reduceUnreadMessages(c.text()),c.hide().text("")},tabClick:function(c){var d=Candy.View.getCurrent().roomJid,e=a.Room.getPane(d,".message-pane");e&&(a.Chat.rooms[d].scrollPosition=e.scrollTop()),a.Room.show(b(this).attr("data-roomjid")),c.preventDefault()},tabClose:function(){var c=b(this).parent().attr("data-roomjid");return"chat"===a.Chat.rooms[c].type?a.Room.close(c):Candy.Core.Action.Jabber.Room.Leave(c),!1},allTabsClosed:function(){return Candy.Core.getOptions().disconnectWithoutTabs?(Candy.Core.disconnect(),a.Chat.Toolbar.hide(),void a.Chat.hideMobileIcon()):void 0},fitTabs:function(){var a=b("#chat-tabs").innerWidth(),c=0,d=b("#chat-tabs").children();if(d.each(function(){c+=b(this).css({width:"auto",overflow:"visible"}).outerWidth(!0)}),c>a){var e=d.outerWidth(!0)-d.width(),f=Math.floor(a/d.length)-e;d.css({width:f,overflow:"hidden"})}},hideMobileIcon:function(){b("#mobile-roster-icon").hide()},showMobileIcon:function(){b("#mobile-roster-icon").show()},clickMobileIcon:function(a){b(".room-pane").is(".open")?b(".room-pane").removeClass("open"):b(".room-pane").addClass("open"),a.preventDefault()},adminMessage:function(c,d){if(Candy.View.getCurrent().roomJid){d=Candy.Util.Parser.all(d.substring(0,Candy.View.getOptions().crop.message.body)),Candy.View.getOptions().enableXHTML===!0&&(d=Candy.Util.parseAndCropXhtml(d,Candy.View.getOptions().crop.message.body));var e=new Date,f=Mustache.to_html(Candy.View.Template.Chat.adminMessage,{subject:c,message:d,sender:b.i18n._("administratorMessageSubject"),time:Candy.Util.localizedTime(e),timestamp:e.toISOString()});b("#chat-rooms").children().each(function(){a.Room.appendToMessagePane(b(this).attr("data-roomjid"),f)}),a.Room.scrollToBottom(Candy.View.getCurrent().roomJid),b(Candy).triggerHandler("candy:view.chat.admin-message",{subject:c,message:d})}},infoMessage:function(b,c,d){a.Chat.onInfoMessage(b,c,d)},onInfoMessage:function(c,d,e){if(e=e||"",Candy.View.getCurrent().roomJid&&a.Chat.rooms[c]){e=Candy.View.getOptions().enableXHTML===!0&&e.length>0?Candy.Util.parseAndCropXhtml(e,Candy.View.getOptions().crop.message.body):Candy.Util.Parser.all(e.substring(0,Candy.View.getOptions().crop.message.body));var f=new Date,g=Mustache.to_html(Candy.View.Template.Chat.infoMessage,{subject:d,message:b.i18n._(e),time:Candy.Util.localizedTime(f),timestamp:f.toISOString()});a.Room.appendToMessagePane(c,g),Candy.View.getCurrent().roomJid===c&&a.Room.scrollToBottom(Candy.View.getCurrent().roomJid)}},Toolbar:{_supportsNativeAudio:null,init:function(){b("#emoticons-icon").click(function(b){a.Chat.Context.showEmoticonsMenu(b.currentTarget),b.stopPropagation()}),b("#chat-autoscroll-control").click(a.Chat.Toolbar.onAutoscrollControlClick);try{if(document.createElement("audio").canPlayType){var c=document.createElement("audio");c.canPlayType("audio/mpeg;").replace(/no/,"")?a.Chat.Toolbar._supportsNativeAudio="mp3":c.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,"")?a.Chat.Toolbar._supportsNativeAudio="ogg":c.canPlayType('audio/mp4; codecs="mp4a.40.2"').replace(/no/,"")&&(a.Chat.Toolbar._supportsNativeAudio="m4a")}}catch(d){}b("#chat-sound-control").click(a.Chat.Toolbar.onSoundControlClick),Candy.Util.cookieExists("candy-nosound")&&b("#chat-sound-control").click(),b("#chat-statusmessage-control").click(a.Chat.Toolbar.onStatusMessageControlClick),Candy.Util.cookieExists("candy-nostatusmessages")&&b("#chat-statusmessage-control").click(),b(".box-shadow-icon").click(a.Chat.clickMobileIcon)},show:function(){b("#chat-toolbar").show()},hide:function(){b("#chat-toolbar").hide()},update:function(c){var d=b("#chat-toolbar").find(".context"),e=a.Room.getUser(c);e&&e.isModerator()?d.show().click(function(b){a.Chat.Context.show(b.currentTarget,c),b.stopPropagation()}):d.hide(),a.Chat.Toolbar.updateUsercount(a.Chat.rooms[c].usercount)},playSound:function(){a.Chat.Toolbar.onPlaySound()},onPlaySound:function(){try{null!==a.Chat.Toolbar._supportsNativeAudio?new Audio(Candy.View.getOptions().assets+"notify."+a.Chat.Toolbar._supportsNativeAudio).play():(b("#chat-sound-control bgsound").remove(),b("<bgsound/>").attr({src:Candy.View.getOptions().assets+"notify.mp3",loop:1,autostart:!0}).appendTo("#chat-sound-control"))}catch(c){}},onSoundControlClick:function(){var c=b("#chat-sound-control");c.hasClass("checked")?(a.Chat.Toolbar.playSound=function(){},Candy.Util.setCookie("candy-nosound","1",365)):(a.Chat.Toolbar.playSound=function(){a.Chat.Toolbar.onPlaySound()},Candy.Util.deleteCookie("candy-nosound")),c.toggleClass("checked")},onAutoscrollControlClick:function(){var c=b("#chat-autoscroll-control");c.hasClass("checked")?(a.Room.scrollToBottom=function(b){a.Room.onScrollToStoredPosition(b)},a.Window.autoscroll=!1):(a.Room.scrollToBottom=function(b){a.Room.onScrollToBottom(b)},a.Room.scrollToBottom(Candy.View.getCurrent().roomJid),a.Window.autoscroll=!0),c.toggleClass("checked")},onStatusMessageControlClick:function(){var c=b("#chat-statusmessage-control");c.hasClass("checked")?(a.Chat.infoMessage=function(){},Candy.Util.setCookie("candy-nostatusmessages","1",365)):(a.Chat.infoMessage=function(b,c,d){a.Chat.onInfoMessage(b,c,d)},Candy.Util.deleteCookie("candy-nostatusmessages")),c.toggleClass("checked")},updateUsercount:function(a){b("#chat-usercount").text(a)}},Modal:{show:function(c,d,e,f){d?a.Chat.Modal.showCloseControl():a.Chat.Modal.hideCloseControl(),e?a.Chat.Modal.showSpinner():a.Chat.Modal.hideSpinner(),b("#chat-modal").removeClass().addClass("modal-common"),f&&b("#chat-modal").addClass(f),b("#chat-modal").stop(!1,!0),b("#chat-modal-body").html(c),b("#chat-modal").fadeIn("fast"),b("#chat-modal-overlay").show()},hide:function(a){b("#chat-modal").removeClass().addClass("modal-common"),b("#chat-modal").fadeOut("fast",function(){b("#chat-modal-body").text(""),b("#chat-modal-overlay").hide()}),b(document).keydown(function(a){27===a.which&&a.preventDefault()}),a&&a()},showSpinner:function(){b("#chat-modal-spinner").show()},hideSpinner:function(){b("#chat-modal-spinner").hide()},showCloseControl:function(){b("#admin-message-cancel").show().click(function(b){a.Chat.Modal.hide(),b.preventDefault()}),b(document).keydown(function(b){27===b.which&&(a.Chat.Modal.hide(),b.preventDefault())})},hideCloseControl:function(){b("#admin-message-cancel").hide().click(function(){})},showLoginForm:function(c,d){var e=Candy.Core.getOptions().domains,f=Candy.Core.getOptions().hideDomainList;e=e?e.map(function(a){return{domain:a}}):null;var g=e&&!f?"login-with-domains":null;a.Chat.Modal.show((c?c:"")+Mustache.to_html(Candy.View.Template.Login.form,{_labelNickname:b.i18n._("labelNickname"),_labelUsername:b.i18n._("labelUsername"),domains:e,_labelPassword:b.i18n._("labelPassword"),_loginSubmit:b.i18n._("loginSubmit"),displayPassword:!Candy.Core.isAnonymousConnection(),displayUsername:!d,displayDomain:e?!0:!1,displayNickname:Candy.Core.isAnonymousConnection(),presetJid:d?d:!1}),null,null,g),f&&(b("#domain").hide(),b(".at-symbol").hide()),b("#login-form").children(":input:first").focus(),b("#login-form").submit(function(){var a=b("#username").val(),c=b("#password").val(),e=b("#domain");if(e=e.length?e.val().split(" ")[0]:null,Candy.Core.isAnonymousConnection())Candy.Core.connect(d,null,a);else{var f;e?(a=a.split("@")[0],f=a+"@"+e):f=Candy.Core.getUser()&&a.indexOf("@")<0?a+"@"+Strophe.getDomainFromJid(Candy.Core.getUser().getJid()):a,f.indexOf("@")<0&&!Candy.Core.getUser()?Candy.View.Pane.Chat.Modal.showLoginForm(b.i18n._("loginInvalid")):Candy.Core.connect(f,c)}return!1})},showEnterPasswordForm:function(c,d,e){a.Chat.Modal.show(Mustache.to_html(Candy.View.Template.PresenceError.enterPasswordForm,{roomName:d,_labelPassword:b.i18n._("labelPassword"),_label:e?e:b.i18n._("enterRoomPassword",[d]),_joinSubmit:b.i18n._("enterRoomPasswordSubmit")}),!0),b("#password").focus(),b("#enter-password-form").submit(function(){var d=b("#password").val();return a.Chat.Modal.hide(function(){Candy.Core.Action.Jabber.Room.Join(c,d)}),!1})},showNicknameConflictForm:function(c){a.Chat.Modal.show(Mustache.to_html(Candy.View.Template.PresenceError.nicknameConflictForm,{_labelNickname:b.i18n._("labelNickname"),_label:b.i18n._("nicknameConflict"),_loginSubmit:b.i18n._("loginSubmit")})),b("#nickname").focus(),b("#nickname-conflict-form").submit(function(){var d=b("#nickname").val();return a.Chat.Modal.hide(function(){Candy.Core.getUser().data.nick=d,Candy.Core.Action.Jabber.Room.Join(c)}),!1})},showError:function(c,d){a.Chat.Modal.show(Mustache.to_html(Candy.View.Template.PresenceError.displayError,{_error:b.i18n._(c,d)}),!0)}},Tooltip:{show:function(a,c){var d=b("#tooltip"),e=b(a.currentTarget);if(c||(c=e.attr("data-tooltip")),0===d.length){var f=Mustache.to_html(Candy.View.Template.Chat.tooltip);b("#chat-pane").append(f),d=b("#tooltip")}b("#context-menu").hide(),d.stop(!1,!0),d.children("div").html(c);var g=e.offset(),h=Candy.Util.getPosLeftAccordingToWindowBounds(d,g.left),i=Candy.Util.getPosTopAccordingToWindowBounds(d,g.top);d.css({left:h.px,top:i.px}).removeClass("left-top left-bottom right-top right-bottom").addClass(h.backgroundPositionAlignment+"-"+i.backgroundPositionAlignment).fadeIn("fast"),e.mouseleave(function(a){a.stopPropagation(),b("#tooltip").stop(!1,!0).fadeOut("fast",function(){b(this).css({top:0,left:0})})})}},Context:{init:function(){if(0===b("#context-menu").length){var a=Mustache.to_html(Candy.View.Template.Chat.Context.menu);b("#chat-pane").append(a),b("#context-menu").mouseleave(function(){b(this).fadeOut("fast")})}},show:function(c,d,e){c=b(c);var f=a.Chat.rooms[d].id,g=b("#context-menu"),h=b("ul li",g);b("#tooltip").hide(),e||(e=Candy.Core.getUser()),h.remove();var i,j=this.getMenuLinks(d,e,c),k=function(a,c){return function(d){d.data.callback(d,a,c),b("#context-menu").hide()}};for(i in j)if(j.hasOwnProperty(i)){var l=j[i],m=Mustache.to_html(Candy.View.Template.Chat.Context.menulinks,{roomId:f,"class":l["class"],id:i,label:l.label});b("ul",g).append(m),b("#context-menu-"+i).bind("click",l,k(d,e))}if(i){var n=c.offset(),o=Candy.Util.getPosLeftAccordingToWindowBounds(g,n.left),p=Candy.Util.getPosTopAccordingToWindowBounds(g,n.top);return g.css({left:o.px,top:p.px}).removeClass("left-top left-bottom right-top right-bottom").addClass(o.backgroundPositionAlignment+"-"+p.backgroundPositionAlignment).fadeIn("fast"),b(Candy).triggerHandler("candy:view.roster.after-context-menu",{roomJid:d,user:e,element:g}),!0}},getMenuLinks:function(c,d,e){var f,g,h={roomJid:c,user:d,elem:e,menulinks:this.initialMenuLinks(e)};b(Candy).triggerHandler("candy:view.roster.context-menu",h),f=h.menulinks;for(g in f)f.hasOwnProperty(g)&&void 0!==f[g].requiredPermission&&!f[g].requiredPermission(d,a.Room.getUser(c),e)&&delete f[g];return f},initialMenuLinks:function(){return{"private":{requiredPermission:function(a,b){return b.getNick()!==a.getNick()&&Candy.Core.getRoom(Candy.View.getCurrent().roomJid)&&!Candy.Core.getUser().isInPrivacyList("ignore",a.getJid())},"class":"private",label:b.i18n._("privateActionLabel"),callback:function(a,c,d){b("#user-"+Candy.Util.jidToId(c)+"-"+Candy.Util.jidToId(d.getJid())).click()}},ignore:{requiredPermission:function(a,b){return b.getNick()!==a.getNick()&&!Candy.Core.getUser().isInPrivacyList("ignore",a.getJid())},"class":"ignore",label:b.i18n._("ignoreActionLabel"),callback:function(a,b,c){Candy.View.Pane.Room.ignoreUser(b,c.getJid())}},unignore:{requiredPermission:function(a,b){return b.getNick()!==a.getNick()&&Candy.Core.getUser().isInPrivacyList("ignore",a.getJid())},"class":"unignore",label:b.i18n._("unignoreActionLabel"),callback:function(a,b,c){Candy.View.Pane.Room.unignoreUser(b,c.getJid())}},kick:{requiredPermission:function(a,b){return b.getNick()!==a.getNick()&&b.isModerator()&&!a.isModerator()},"class":"kick",label:b.i18n._("kickActionLabel"),callback:function(c,d,e){a.Chat.Modal.show(Mustache.to_html(Candy.View.Template.Chat.Context.contextModalForm,{_label:b.i18n._("reason"),_submit:b.i18n._("kickActionLabel")}),!0),b("#context-modal-field").focus(),b("#context-modal-form").submit(function(){return Candy.Core.Action.Jabber.Room.Admin.UserAction(d,e.getJid(),"kick",b("#context-modal-field").val()),a.Chat.Modal.hide(),!1})}},ban:{requiredPermission:function(a,b){return b.getNick()!==a.getNick()&&b.isModerator()&&!a.isModerator()},"class":"ban",label:b.i18n._("banActionLabel"),callback:function(c,d,e){a.Chat.Modal.show(Mustache.to_html(Candy.View.Template.Chat.Context.contextModalForm,{_label:b.i18n._("reason"),_submit:b.i18n._("banActionLabel")}),!0),b("#context-modal-field").focus(),b("#context-modal-form").submit(function(){return Candy.Core.Action.Jabber.Room.Admin.UserAction(d,e.getJid(),"ban",b("#context-modal-field").val()),a.Chat.Modal.hide(),!1})}},subject:{requiredPermission:function(a,b){return b.getNick()===a.getNick()&&b.isModerator()},"class":"subject",label:b.i18n._("setSubjectActionLabel"),callback:function(c,d){a.Chat.Modal.show(Mustache.to_html(Candy.View.Template.Chat.Context.contextModalForm,{_label:b.i18n._("subject"),_submit:b.i18n._("setSubjectActionLabel")}),!0),b("#context-modal-field").focus(),b("#context-modal-form").submit(function(c){Candy.Core.Action.Jabber.Room.Admin.SetSubject(d,b("#context-modal-field").val()),a.Chat.Modal.hide(),c.preventDefault()})}}}},showEmoticonsMenu:function(a){a=b(a);var c,d=a.offset(),e=b("#context-menu"),f=b("ul",e),g="";for(b("#tooltip").hide(),c=Candy.Util.Parser.emoticons.length-1;c>=0;c--)g='<img src="'+Candy.Util.Parser._emoticonPath+Candy.Util.Parser.emoticons[c].image+'" alt="'+Candy.Util.Parser.emoticons[c].plain+'" />'+g;f.html('<li class="emoticons">'+g+"</li>"),f.find("img").click(function(){var a=Candy.View.Pane.Room.getPane(Candy.View.getCurrent().roomJid,".message-form").children(".field"),c=a.val(),d=b(this).attr("alt")+" ";a.val(c?c+" "+d:d).focus(),e.hide()});var h=Candy.Util.getPosLeftAccordingToWindowBounds(e,d.left),i=Candy.Util.getPosTopAccordingToWindowBounds(e,d.top);return e.css({left:h.px,top:i.px}).removeClass("left-top left-bottom right-top right-bottom").addClass(h.backgroundPositionAlignment+"-"+i.backgroundPositionAlignment).fadeIn("fast"),!0}}},a}(Candy.View.Pane||{},jQuery),Candy.View.Pane=function(a,b){return a.Message={submit:function(c){var d,e=Candy.View.getCurrent().roomJid,f=Candy.View.Pane.Chat.rooms[e],g=f.type,h=f.targetJid,i=b(this).children(".field").val().substring(0,Candy.View.getOptions().crop.message.body),j={roomJid:e,message:i,xhtmlMessage:d};return b(Candy).triggerHandler("candy:view.message.before-send",j)===!1?void c.preventDefault():(i=j.message,d=j.xhtmlMessage,Candy.Core.Action.Jabber.Room.Message(h,i,g,d),"chat"===g&&i&&a.Message.show(e,a.Room.getUser(e).getNick(),i,d,void 0,Candy.Core.getUser().getJid()),b(this).children(".field").val("").focus(),void c.preventDefault())},show:function(c,d,e,f,g,h,i,j){e=Candy.Util.Parser.all(e.substring(0,Candy.View.getOptions().crop.message.body)),Candy.View.getOptions().enableXHTML===!0&&f&&(f=Candy.Util.parseAndCropXhtml(f,Candy.View.getOptions().crop.message.body)),g=g||new Date,g.toDateString||(g=Candy.Util.iso8601toDate(g));var k=a.Room.getPane(c,".message-pane"),l=k.scrollTop()+k.outerHeight()===k.prop("scrollHeight")||!b(k).is(":visible");Candy.View.Pane.Chat.rooms[c].enableScroll=l;var m={roomJid:c,name:d,message:e,xhtmlMessage:f,from:h,stanza:j};if(b(Candy).triggerHandler("candy:view.message.before-show",m)!==!1&&(e=m.message,f=m.xhtmlMessage,void 0!==f&&f.length>0&&(e=f),e)){var n={template:Candy.View.Template.Message.item,templateData:{name:d,displayName:Candy.Util.crop(d,Candy.View.getOptions().crop.message.nickname),message:e,time:Candy.Util.localizedTime(g),timestamp:g.toISOString(),roomjid:c,from:h},stanza:j};b(Candy).triggerHandler("candy:view.message.before-render",n);var o=Mustache.to_html(n.template,n.templateData);a.Room.appendToMessagePane(c,o);var p=a.Room.getPane(c,".message-pane").children().last();if(p.find("a.label").click(function(b){b.preventDefault();var e=Candy.Core.getRoom(c);return e&&d!==a.Room.getUser(Candy.View.getCurrent().roomJid).getNick()&&e.getRoster().get(c+"/"+d)&&Candy.View.Pane.PrivateRoom.open(c+"/"+d,d,!0)===!1?!1:void 0}),!i){var q={name:d,displayName:Candy.Util.crop(d,Candy.View.getOptions().crop.message.nickname),roomJid:c,message:e,time:Candy.Util.localizedTime(g),timestamp:g.toISOString()};b(Candy).triggerHandler("candy:view.message.notify",q),Candy.Core.getOptions().disableCoreNotifications||Candy.View.getCurrent().roomJid===c&&a.Window.hasFocus()||(a.Chat.increaseUnreadMessages(c),a.Window.hasFocus()||("chat"===Candy.View.Pane.Chat.rooms[c].type||Candy.View.getOptions().updateWindowOnAllMessages===!0)&&a.Chat.Toolbar.playSound()),Candy.View.getCurrent().roomJid===c&&a.Room.scrollToBottom(c)}m.element=p,b(Candy).triggerHandler("candy:view.message.after-show",m)}}},a}(Candy.View.Pane||{},jQuery),Candy.View.Pane=function(a,b){return a.PrivateRoom={open:function(c,d,e,f){var g=f?Candy.Core.getUser():a.Room.getUser(Strophe.getBareJidFromJid(c)),h={roomJid:c,roomName:d,type:"chat"};return b(Candy).triggerHandler("candy:view.private-room.before-open",h)===!1?!1:Candy.Core.getUser().isInPrivacyList("ignore",c)?!1:a.Chat.rooms[c]||a.Room.init(c,d,"chat")!==!1?(e&&a.Room.show(c),a.Roster.update(c,new Candy.Core.ChatUser(c,d),"join",g),a.Roster.update(c,g,"join",g),a.PrivateRoom.setStatus(c,"join"),h.element=a.Room.getPane(c),void b(Candy).triggerHandler("candy:view.private-room.after-open",h)):!1},setStatus:function(b,c){var d=a.Room.getPane(b,".message-form");"join"===c?(a.Chat.getTab(b).addClass("online").removeClass("offline"),d.children(".field").removeAttr("disabled"),d.children(".submit").removeAttr("disabled"),a.Chat.getTab(b)):"leave"===c&&(a.Chat.getTab(b).addClass("offline").removeClass("online"),d.children(".field").attr("disabled",!0),d.children(".submit").attr("disabled",!0))},changeNick:function(c,d){Candy.Core.log("[View:Pane:PrivateRoom] changeNick");var e,f,g=c+"/"+d.getPreviousNick(),h=c+"/"+d.getNick(),i=Candy.Util.jidToId(g),j=Candy.Util.jidToId(h),k=a.Chat.rooms[g];a.Chat.rooms[h]&&a.Room.close(h),k?(k.name=d.getNick(),k.id=j,a.Chat.rooms[h]=k,delete a.Chat.rooms[g],e=b("#chat-room-"+i),e&&(e.attr("data-roomjid",h),e.attr("id","chat-room-"+j),f=b('#chat-tabs li[data-roomjid="'+g+'"]'),f.attr("data-roomjid",h),f.children("a.label").text("@"+d.getNick()),Candy.View.getCurrent().roomJid===g&&(Candy.View.getCurrent().roomJid=h))):(e=b('.room-pane.roomtype-chat[data-userjid="'+g+'"]'),e.length&&(i=Candy.Util.jidToId(e.attr("data-roomjid")),e.attr("data-userjid",h))),e&&e.length&&a.Roster.changeNick(i,d)}},a}(Candy.View.Pane||{},jQuery),Candy.View.Pane=function(a,b){return a.Room={init:function(c,d,e){e=e||"groupchat",c=Candy.Util.unescapeJid(c);var f={roomJid:c,type:e};if(b(Candy).triggerHandler("candy:view.room.before-add",f)===!1)return!1;Candy.Util.isEmptyObject(a.Chat.rooms)&&(a.Chat.Toolbar.show(),a.Chat.showMobileIcon());var g=Candy.Util.jidToId(c);return a.Chat.rooms[c]={id:g,usercount:0,name:d,type:e,messageCount:0,scrollPosition:-1,targetJid:c},b("#chat-rooms").append(Mustache.to_html(Candy.View.Template.Room.pane,{roomId:g,roomJid:c,roomType:e,form:{_messageSubmit:b.i18n._("messageSubmit")},roster:{_userOnline:b.i18n._("userOnline")}},{roster:Candy.View.Template.Roster.pane,messages:Candy.View.Template.Message.pane,form:Candy.View.Template.Room.form})),a.Chat.addTab(c,d,e),a.Room.getPane(c,".message-form").submit(a.Message.submit),a.Room.scrollToBottom(c),f.element=a.Room.getPane(c),b(Candy).triggerHandler("candy:view.room.after-add",f),g},show:function(c){var d,e=a.Chat.rooms[c].id;b(".room-pane").each(function(){var f=b(this);d={roomJid:f.attr("data-roomjid"),type:f.attr("data-roomtype"),element:f},f.attr("id")==="chat-room-"+e?(f.show(),Candy.View.getCurrent().roomJid=c,a.Chat.setActiveTab(c),a.Chat.Toolbar.update(c),a.Chat.clearUnreadMessages(c),a.Room.setFocusToForm(c),a.Room.scrollToBottom(c),b(Candy).triggerHandler("candy:view.room.after-show",d)):(f.hide(),b(Candy).triggerHandler("candy:view.room.after-hide",d))})},setSubject:function(c,d){d=Candy.Util.Parser.linkify(Candy.Util.Parser.escape(d));var e=new Date,f=Mustache.to_html(Candy.View.Template.Room.subject,{subject:d,roomName:a.Chat.rooms[c].name,_roomSubject:b.i18n._("roomSubject"),time:Candy.Util.localizedTime(e),timestamp:e.toISOString()});a.Room.appendToMessagePane(c,f),a.Room.scrollToBottom(c),b(Candy).triggerHandler("candy:view.room.after-subject-change",{roomJid:c,element:a.Room.getPane(c),subject:d})},close:function(c){a.Chat.removeTab(c),a.Window.clearUnreadMessages(),a.Room.getPane(c).remove();var d=b("#chat-rooms").children();Candy.View.getCurrent().roomJid===c&&(Candy.View.getCurrent().roomJid=null,0===d.length?a.Chat.allTabsClosed():a.Room.show(d.last().attr("data-roomjid"))),delete a.Chat.rooms[c],b(Candy).triggerHandler("candy:view.room.after-close",{roomJid:c})},appendToMessagePane:function(b,c){a.Room.getPane(b,".message-pane").append(c),a.Chat.rooms[b].messageCount++,a.Room.sliceMessagePane(b)},sliceMessagePane:function(b){if(a.Window.autoscroll){var c=Candy.View.getOptions().messages;a.Chat.rooms[b].messageCount>c.limit&&(a.Room.getPane(b,".message-pane").children().slice(0,c.remove).remove(),a.Chat.rooms[b].messageCount-=c.remove)}},scrollToBottom:function(b){a.Room.onScrollToBottom(b)},onScrollToBottom:function(b){var c=a.Room.getPane(b,".message-pane-wrapper");return Candy.View.Pane.Chat.rooms[b].enableScroll!==!0?!1:void c.scrollTop(c.prop("scrollHeight"))},onScrollToStoredPosition:function(b){if(a.Chat.rooms[b].scrollPosition>-1){var c=a.Room.getPane(b,".message-pane-wrapper");c.scrollTop(a.Chat.rooms[b].scrollPosition),a.Chat.rooms[b].scrollPosition=-1}},setFocusToForm:function(b){if(Candy.Util.isMobile())return!0;var c=a.Room.getPane(b,".message-form");if(c)try{c.children(".field")[0].focus()}catch(d){}},setUser:function(c,d){a.Chat.rooms[c].user=d;var e=a.Room.getPane(c),f=b("#chat-pane");e.attr("data-userjid",d.getJid()),d.isModerator()?(d.getRole()===d.ROLE_MODERATOR&&f.addClass("role-moderator"),d.getAffiliation()===d.AFFILIATION_OWNER&&f.addClass("affiliation-owner")):f.removeClass("role-moderator affiliation-owner"),a.Chat.Context.init()},getUser:function(b){return a.Chat.rooms[b].user},ignoreUser:function(a,b){Candy.Core.Action.Jabber.Room.IgnoreUnignore(b),Candy.View.Pane.Room.addIgnoreIcon(a,b)},unignoreUser:function(a,b){Candy.Core.Action.Jabber.Room.IgnoreUnignore(b),Candy.View.Pane.Room.removeIgnoreIcon(a,b)},addIgnoreIcon:function(a,c){Candy.View.Pane.Chat.rooms[c]&&b("#user-"+Candy.View.Pane.Chat.rooms[c].id+"-"+Candy.Util.jidToId(c)).addClass("status-ignored"),Candy.View.Pane.Chat.rooms[Strophe.getBareJidFromJid(a)]&&b("#user-"+Candy.View.Pane.Chat.rooms[Strophe.getBareJidFromJid(a)].id+"-"+Candy.Util.jidToId(c)).addClass("status-ignored")},removeIgnoreIcon:function(a,c){Candy.View.Pane.Chat.rooms[c]&&b("#user-"+Candy.View.Pane.Chat.rooms[c].id+"-"+Candy.Util.jidToId(c)).removeClass("status-ignored"),Candy.View.Pane.Chat.rooms[Strophe.getBareJidFromJid(a)]&&b("#user-"+Candy.View.Pane.Chat.rooms[Strophe.getBareJidFromJid(a)].id+"-"+Candy.Util.jidToId(c)).removeClass("status-ignored")},getPane:function(c,d){return a.Chat.rooms[c]?d?a.Chat.rooms[c]["pane-"+d]?a.Chat.rooms[c]["pane-"+d]:(a.Chat.rooms[c]["pane-"+d]=b("#chat-room-"+a.Chat.rooms[c].id).find(d),
a.Chat.rooms[c]["pane-"+d]):b("#chat-room-"+a.Chat.rooms[c].id):void 0},changeDataUserJidIfUserIsMe:function(a,c){if(c.getNick()===Candy.Core.getUser().getNick()){var d=b("#chat-room-"+a);d.attr("data-userjid",Strophe.getBareJidFromJid(d.attr("data-userjid"))+"/"+c.getNick())}}},a}(Candy.View.Pane||{},jQuery),Candy.View.Pane=function(a,b){return a.Roster={update:function(c,d,e,f){Candy.Core.log("[View:Pane:Roster] "+e);var g=a.Chat.rooms[c].id,h=Candy.Util.jidToId(d.getJid()),i=-1,j=b("#user-"+g+"-"+h),k={roomJid:c,user:d,action:e,element:j};if(b(Candy).triggerHandler("candy:view.roster.before-update",k),"join"===e)i=1,j.length<1?(a.Roster._insertUser(c,g,d,h,f),a.Roster.showJoinAnimation(d,h,g,c,f)):(i=0,j.remove(),a.Roster._insertUser(c,g,d,h,f),void 0!==f&&d.getNick()===f.getNick()&&a.Room.getUser(c)&&a.Chat.Toolbar.update(c)),void 0!==f&&f.getNick()===d.getNick()?a.Room.setUser(c,d):b("#user-"+g+"-"+h).click(a.Roster.userClick),b("#user-"+g+"-"+h+" .context").click(function(b){a.Chat.Context.show(b.currentTarget,c,d),b.stopPropagation()}),void 0!==f&&f.isInPrivacyList("ignore",d.getJid())&&Candy.View.Pane.Room.addIgnoreIcon(c,d.getJid());else if("leave"===e)a.Roster.leaveAnimation("user-"+g+"-"+h),"chat"===a.Chat.rooms[c].type?a.Chat.onInfoMessage(c,null,b.i18n._("userLeftRoom",[d.getNick()])):a.Chat.infoMessage(c,null,b.i18n._("userLeftRoom",[d.getNick()]),"");else if("nickchange"===e){i=0,a.Roster.changeNick(g,d),a.Room.changeDataUserJidIfUserIsMe(g,d),a.PrivateRoom.changeNick(c,d);var l=b.i18n._("userChangedNick",[d.getPreviousNick(),d.getNick()]);a.Chat.infoMessage(c,null,l)}else"kick"===e?(a.Roster.leaveAnimation("user-"+g+"-"+h),a.Chat.onInfoMessage(c,null,b.i18n._("userHasBeenKickedFromRoom",[d.getNick()]))):"ban"===e&&(a.Roster.leaveAnimation("user-"+g+"-"+h),a.Chat.onInfoMessage(c,null,b.i18n._("userHasBeenBannedFromRoom",[d.getNick()])));Candy.View.Pane.Chat.rooms[c].usercount+=i,c===Candy.View.getCurrent().roomJid&&Candy.View.Pane.Chat.Toolbar.updateUsercount(Candy.View.Pane.Chat.rooms[c].usercount),k.element=b("#user-"+g+"-"+h),b(Candy).triggerHandler("candy:view.roster.after-update",k)},_insertUser:function(c,d,e,f,g){var h=e.getContact(),i=Mustache.to_html(Candy.View.Template.Roster.user,{roomId:d,userId:f,userJid:e.getJid(),realJid:e.getRealJid(),status:e.getStatus(),contact_status:h?h.getStatus():"unavailable",nick:e.getNick(),displayNick:Candy.Util.crop(e.getNick(),Candy.View.getOptions().crop.roster.nickname),role:e.getRole(),affiliation:e.getAffiliation(),me:void 0!==g&&e.getNick()===g.getNick(),tooltipRole:b.i18n._("tooltipRole"),tooltipIgnored:b.i18n._("tooltipIgnored")}),j=!1,k=a.Room.getPane(c,".roster-pane");if(k.children().length>0){var l=a.Roster._userSortCompare(e.getNick(),e.getStatus());k.children().each(function(){var c=b(this);return a.Roster._userSortCompare(c.attr("data-nick"),c.attr("data-status"))>l?(c.before(i),j=!0,!1):!0})}j||k.append(i)},_userSortCompare:function(a,b){var c;switch(b){case"available":c=1;break;case"unavailable":c=9;break;default:c=8}return c+a.toUpperCase()},userClick:function(){var c=b(this),d=c.attr("data-real-jid"),e=Candy.Core.getOptions().useParticipantRealJid&&void 0!==d&&null!==d&&""!==d,f=e&&d?Strophe.getBareJidFromJid(d):c.attr("data-jid");a.PrivateRoom.open(f,c.attr("data-nick"),!0,e)},showJoinAnimation:function(c,d,e,f,g){var h="user-"+e+"-"+d,i=b("#"+h);c.getPreviousNick()&&i&&i.is(":visible")!==!1||(a.Roster.joinAnimation(h),void 0!==g&&c.getNick()!==g.getNick()&&a.Room.getUser(f)&&("chat"===a.Chat.rooms[f].type?a.Chat.onInfoMessage(f,null,b.i18n._("userJoinedRoom",[c.getNick()])):a.Chat.infoMessage(f,null,b.i18n._("userJoinedRoom",[c.getNick()]))))},joinAnimation:function(a){b("#"+a).stop(!0).slideDown("normal",function(){b(this).animate({opacity:1})})},leaveAnimation:function(a){b("#"+a).stop(!0).attr("id","#"+a+"-leaving").animate({opacity:0},{complete:function(){b(this).slideUp("normal",function(){b(this).remove()})}})},changeNick:function(a,c){Candy.Core.log("[View:Pane:Roster] changeNick");var d=Strophe.getBareJidFromJid(c.getJid())+"/"+c.getPreviousNick(),e="user-"+a+"-"+Candy.Util.jidToId(d),f=b("#"+e);f.attr("data-nick",c.getNick()),f.attr("data-jid",c.getJid()),f.children("div.label").text(c.getNick()),f.attr("id","user-"+a+"-"+Candy.Util.jidToId(c.getJid()))}},a}(Candy.View.Pane||{},jQuery),Candy.View.Pane=function(a){return a.Window={_hasFocus:!0,_plainTitle:window.top.document.title,_unreadMessagesCount:0,autoscroll:!0,hasFocus:function(){return a.Window._hasFocus},increaseUnreadMessages:function(){a.Window.renderUnreadMessages(++a.Window._unreadMessagesCount)},reduceUnreadMessages:function(b){a.Window._unreadMessagesCount-=b,a.Window._unreadMessagesCount<=0?a.Window.clearUnreadMessages():a.Window.renderUnreadMessages(a.Window._unreadMessagesCount)},clearUnreadMessages:function(){a.Window._unreadMessagesCount=0,window.top.document.title=a.Window._plainTitle},renderUnreadMessages:function(b){window.top.document.title=Candy.View.Template.Window.unreadmessages.replace("{{count}}",b).replace("{{title}}",a.Window._plainTitle)},onFocus:function(){a.Window._hasFocus=!0,Candy.View.getCurrent().roomJid&&(a.Room.setFocusToForm(Candy.View.getCurrent().roomJid),a.Chat.clearUnreadMessages(Candy.View.getCurrent().roomJid))},onBlur:function(){a.Window._hasFocus=!1}},a}(Candy.View.Pane||{},jQuery),Candy.View.Template=function(a){return a.Window={unreadmessages:"({{count}}) {{title}}"},a.Chat={pane:'<div id="chat-pane">{{> tabs}}{{> mobile}}{{> toolbar}}{{> rooms}}</div>{{> modal}}',rooms:'<div id="chat-rooms" class="rooms"></div>',tabs:'<ul id="chat-tabs"></ul>',mobileIcon:'<div id="mobile-roster-icon"><a class="box-shadow-icon"></a></div>',tab:'<li class="roomtype-{{roomType}}" data-roomjid="{{roomJid}}" data-roomtype="{{roomType}}"><a href="#" class="label">{{#privateUserChat}}@{{/privateUserChat}}{{name}}</a><a href="#" class="transition"></a><a href="#" class="close"></a><small class="unread"></small></li>',modal:'<div id="chat-modal"><a id="admin-message-cancel" class="close" href="#"></a><span id="chat-modal-body"></span><img src="{{assetsPath}}img/modal-spinner.gif" id="chat-modal-spinner" /></div><div id="chat-modal-overlay"></div>',adminMessage:'<li><small data-timestamp="{{timestamp}}">{{time}}</small><div class="adminmessage"><span class="label">{{sender}}</span><span class="spacer"></span>{{subject}} {{{message}}}</div></li>',infoMessage:'<li><small data-timestamp="{{timestamp}}">{{time}}</small><div class="infomessage"><span class="spacer"></span>{{subject}} {{{message}}}</div></li>',toolbar:'<ul id="chat-toolbar"><li id="emoticons-icon" data-tooltip="{{tooltipEmoticons}}"></li><li id="chat-sound-control" class="checked" data-tooltip="{{tooltipSound}}"></li><li id="chat-autoscroll-control" class="checked" data-tooltip="{{tooltipAutoscroll}}"></li><li class="checked" id="chat-statusmessage-control" data-tooltip="{{tooltipStatusmessage}}"></li><li class="context" data-tooltip="{{tooltipAdministration}}"></li><li class="usercount" data-tooltip="{{tooltipUsercount}}"><span id="chat-usercount"></span></li></ul>',Context:{menu:'<div id="context-menu"><i class="arrow arrow-top"></i><ul></ul><i class="arrow arrow-bottom"></i></div>',menulinks:'<li class="{{class}}" id="context-menu-{{id}}">{{label}}</li>',contextModalForm:'<form action="#" id="context-modal-form"><label for="context-modal-label">{{_label}}</label><input type="text" name="contextModalField" id="context-modal-field" /><input type="submit" class="button" name="send" value="{{_submit}}" /></form>',adminMessageReason:'<a id="admin-message-cancel" class="close" href="#"></a><p>{{_action}}</p>{{#reason}}<p>{{_reason}}</p>{{/reason}}'},tooltip:'<div id="tooltip"><i class="arrow arrow-top"></i><div></div><i class="arrow arrow-bottom"></i></div>'},a.Room={pane:'<div class="room-pane roomtype-{{roomType}}" id="chat-room-{{roomId}}" data-roomjid="{{roomJid}}" data-roomtype="{{roomType}}">{{> roster}}{{> messages}}{{> form}}</div>',subject:'<li><small data-timestamp="{{timestamp}}">{{time}}</small><div class="subject"><span class="label">{{roomName}}</span><span class="spacer"></span>{{_roomSubject}} {{{subject}}}</div></li>',form:'<div class="message-form-wrapper"><form method="post" class="message-form"><input name="message" class="field" type="text" aria-label="Message Form Text Field" autocomplete="off" maxlength="1000" /><input type="submit" class="submit" name="submit" value="{{_messageSubmit}}" /></form></div>'},a.Roster={pane:'<div class="roster-pane"></div>',user:'<div class="user role-{{role}} affiliation-{{affiliation}}{{#me}} me{{/me}}" id="user-{{roomId}}-{{userId}}" data-jid="{{userJid}}" data-real-jid="{{realJid}}" data-nick="{{nick}}" data-role="{{role}}" data-affiliation="{{affiliation}}" data-status="{{status}}"><div class="label">{{displayNick}}</div><ul><li class="context" id="context-{{roomId}}-{{userId}}">&#x25BE;</li><li class="role role-{{role}} affiliation-{{affiliation}}" data-tooltip="{{tooltipRole}}"></li><li class="ignore" data-tooltip="{{tooltipIgnored}}"></li></ul></div>'},a.Message={pane:'<div class="message-pane-wrapper"><ul class="message-pane"></ul></div>',item:'<li><small data-timestamp="{{timestamp}}">{{time}}</small><div><a class="label" href="#" class="name">{{displayName}}</a><span class="spacer"></span>{{{message}}}</div></li>'},a.Login={form:'<form method="post" id="login-form" class="login-form">{{#displayNickname}}<label for="username">{{_labelNickname}}</label><input type="text" id="username" name="username"/>{{/displayNickname}}{{#displayUsername}}<label for="username">{{_labelUsername}}</label><input type="text" id="username" name="username"/>{{#displayDomain}} <span class="at-symbol">@</span> <select id="domain" name="domain">{{#domains}}<option value="{{domain}}">{{domain}}</option>{{/domains}}</select>{{/displayDomain}}{{/displayUsername}}{{#presetJid}}<input type="hidden" id="username" name="username" value="{{presetJid}}"/>{{/presetJid}}{{#displayPassword}}<label for="password">{{_labelPassword}}</label><input type="password" id="password" name="password" />{{/displayPassword}}<input type="submit" class="button" value="{{_loginSubmit}}" /></form>'},a.PresenceError={enterPasswordForm:'<strong>{{_label}}</strong><form method="post" id="enter-password-form" class="enter-password-form"><label for="password">{{_labelPassword}}</label><input type="password" id="password" name="password" /><input type="submit" class="button" value="{{_joinSubmit}}" /></form>',nicknameConflictForm:'<strong>{{_label}}</strong><form method="post" id="nickname-conflict-form" class="nickname-conflict-form"><label for="nickname">{{_labelNickname}}</label><input type="text" id="nickname" name="nickname" /><input type="submit" class="button" value="{{_loginSubmit}}" /></form>',displayError:"<strong>{{_error}}</strong>"},a}(Candy.View.Template||{}),Candy.View.Translation={en:{status:"Status: %s",statusConnecting:"Connecting...",statusConnected:"Connected",statusDisconnecting:"Disconnecting...",statusDisconnected:"Disconnected",statusAuthfail:"Authentication failed",roomSubject:"Subject:",messageSubmit:"Send",labelUsername:"Username:",labelNickname:"Nickname:",labelPassword:"Password:",loginSubmit:"Login",loginInvalid:"Invalid JID",reason:"Reason:",subject:"Subject:",reasonWas:"Reason was: %s.",kickActionLabel:"Kick",youHaveBeenKickedBy:"You have been kicked from %2$s by %1$s",youHaveBeenKicked:"You have been kicked from %s",banActionLabel:"Ban",youHaveBeenBannedBy:"You have been banned from %1$s by %2$s",youHaveBeenBanned:"You have been banned from %s",privateActionLabel:"Private chat",ignoreActionLabel:"Ignore",unignoreActionLabel:"Unignore",setSubjectActionLabel:"Change Subject",administratorMessageSubject:"Administrator",userJoinedRoom:"%s joined the room.",userLeftRoom:"%s left the room.",userHasBeenKickedFromRoom:"%s has been kicked from the room.",userHasBeenBannedFromRoom:"%s has been banned from the room.",userChangedNick:"%1$s is now known as %2$s.",dateFormat:"dd.mm.yyyy",timeFormat:"HH:MM:ss",tooltipRole:"Moderator",tooltipIgnored:"You ignore this user",tooltipEmoticons:"Emoticons",tooltipSound:"Play sound for new private messages",tooltipAutoscroll:"Autoscroll",tooltipStatusmessage:"Display status messages",tooltipAdministration:"Room Administration",tooltipUsercount:"Room Occupants",enterRoomPassword:'Room "%s" is password protected.',enterRoomPasswordSubmit:"Join room",passwordEnteredInvalid:'Invalid password for room "%s".',nicknameConflict:"Username already in use. Please choose another one.",errorMembersOnly:'You can\'t join room "%s": Insufficient rights.',errorMaxOccupantsReached:'You can\'t join room "%s": Too many occupants.',errorAutojoinMissing:"No autojoin parameter set in configuration. Please set one to continue.",antiSpamMessage:"Please do not spam. You have been blocked for a short-time."},de:{status:"Status: %s",statusConnecting:"Verbinden...",statusConnected:"Verbunden",statusDisconnecting:"Verbindung trennen...",statusDisconnected:"Verbindung getrennt",statusAuthfail:"Authentifizierung fehlgeschlagen",roomSubject:"Thema:",messageSubmit:"Senden",labelUsername:"Benutzername:",labelNickname:"Spitzname:",labelPassword:"Passwort:",loginSubmit:"Anmelden",loginInvalid:"Ungltige JID",reason:"Begrndung:",subject:"Titel:",reasonWas:"Begrndung: %s.",kickActionLabel:"Kick",youHaveBeenKickedBy:"Du wurdest soeben aus dem Raum %1$s gekickt (%2$s)",youHaveBeenKicked:"Du wurdest soeben aus dem Raum %s gekickt",banActionLabel:"Ban",youHaveBeenBannedBy:"Du wurdest soeben aus dem Raum %1$s verbannt (%2$s)",youHaveBeenBanned:"Du wurdest soeben aus dem Raum %s verbannt",privateActionLabel:"Privater Chat",ignoreActionLabel:"Ignorieren",unignoreActionLabel:"Nicht mehr ignorieren",setSubjectActionLabel:"Thema ndern",administratorMessageSubject:"Administrator",userJoinedRoom:"%s hat soeben den Raum betreten.",userLeftRoom:"%s hat soeben den Raum verlassen.",userHasBeenKickedFromRoom:"%s ist aus dem Raum gekickt worden.",userHasBeenBannedFromRoom:"%s ist aus dem Raum verbannt worden.",userChangedNick:"%1$s hat den Nicknamen zu %2$s gendert.",dateFormat:"dd.mm.yyyy",timeFormat:"HH:MM:ss",tooltipRole:"Moderator",tooltipIgnored:"Du ignorierst diesen Benutzer",tooltipEmoticons:"Smileys",tooltipSound:"Ton abspielen bei neuen privaten Nachrichten",tooltipAutoscroll:"Autoscroll",tooltipStatusmessage:"Statusnachrichten anzeigen",tooltipAdministration:"Raum Administration",tooltipUsercount:"Anzahl Benutzer im Raum",enterRoomPassword:'Raum "%s" ist durch ein Passwort geschtzt.',enterRoomPasswordSubmit:"Raum betreten",passwordEnteredInvalid:'Inkorrektes Passwort fr Raum "%s".',nicknameConflict:"Der Benutzername wird bereits verwendet. Bitte whle einen anderen.",errorMembersOnly:'Du kannst den Raum "%s" nicht betreten: Ungengende Rechte.',errorMaxOccupantsReached:'Du kannst den Raum "%s" nicht betreten: Benutzerlimit erreicht.',errorAutojoinMissing:'Keine "autojoin" Konfiguration gefunden. Bitte setze eine konfiguration um fortzufahren.',antiSpamMessage:"Bitte nicht spammen. Du wurdest fr eine kurze Zeit blockiert."},fr:{status:"Status&thinsp;: %s",statusConnecting:"Connexion",statusConnected:"Connect",statusDisconnecting:"Dconnexion",statusDisconnected:"Dconnect",statusAuthfail:"Lidentification a chou",roomSubject:"Sujet&thinsp;:",messageSubmit:"Envoyer",labelUsername:"Nom dutilisateur&thinsp;:",labelNickname:"Pseudo&thinsp;:",labelPassword:"Mot de passe&thinsp;:",loginSubmit:"Connexion",loginInvalid:"JID invalide",reason:"Motif&thinsp;:",subject:"Titre&thinsp;:",reasonWas:"Motif&thinsp;: %s.",kickActionLabel:"Kick",youHaveBeenKickedBy:"Vous avez t expuls du salon %1$s (%2$s)",youHaveBeenKicked:"Vous avez t expuls du salon %s",banActionLabel:"Ban",youHaveBeenBannedBy:"Vous avez t banni du salon %1$s (%2$s)",youHaveBeenBanned:"Vous avez t banni du salon %s",privateActionLabel:"Chat priv",ignoreActionLabel:"Ignorer",unignoreActionLabel:"Ne plus ignorer",setSubjectActionLabel:"Changer le sujet",administratorMessageSubject:"Administrateur",userJoinedRoom:"%s vient dentrer dans le salon.",userLeftRoom:"%s vient de quitter le salon.",userHasBeenKickedFromRoom:"%s a t expuls du salon.",userHasBeenBannedFromRoom:"%s a t banni du salon.",dateFormat:"dd/mm/yyyy",timeFormat:"HH:MM:ss",tooltipRole:"Modrateur",tooltipIgnored:"Vous ignorez cette personne",tooltipEmoticons:"Smileys",tooltipSound:"Jouer un son lors de la rception de messages privs",tooltipAutoscroll:"Dfilement automatique",tooltipStatusmessage:"Afficher les changements dtat",tooltipAdministration:"Administration du salon",tooltipUsercount:"Nombre dutilisateurs dans le salon",enterRoomPassword:"Le salon %s est protg par un mot de passe.",enterRoomPasswordSubmit:"Entrer dans le salon",passwordEnteredInvalid:"Le mot de passe pour le salon %s est invalide.",nicknameConflict:"Ce nom dutilisateur est dj utilis. Veuillez en choisir un autre.",errorMembersOnly:"Vous ne pouvez pas entrer dans le salon %s&thinsp;: droits insuffisants.",errorMaxOccupantsReached:"Vous ne pouvez pas entrer dans le salon %s&thinsp;: limite dutilisateurs atteinte.",antiSpamMessage:"Merci de ne pas spammer. Vous avez t bloqu pendant une courte priode."},nl:{status:"Status: %s",statusConnecting:"Verbinding maken...",statusConnected:"Verbinding is gereed",statusDisconnecting:"Verbinding verbreken...",statusDisconnected:"Verbinding is verbroken",statusAuthfail:"Authenticatie is mislukt",roomSubject:"Onderwerp:",messageSubmit:"Verstuur",labelUsername:"Gebruikersnaam:",labelPassword:"Wachtwoord:",loginSubmit:"Inloggen",loginInvalid:"JID is onjuist",reason:"Reden:",subject:"Onderwerp:",reasonWas:"De reden was: %s.",kickActionLabel:"Verwijderen",youHaveBeenKickedBy:"Je bent verwijderd van %1$s door %2$s",youHaveBeenKicked:"Je bent verwijderd van %s",banActionLabel:"Blokkeren",youHaveBeenBannedBy:"Je bent geblokkeerd van %1$s door %2$s",youHaveBeenBanned:"Je bent geblokkeerd van %s",privateActionLabel:"Prive gesprek",ignoreActionLabel:"Negeren",unignoreActionLabel:"Niet negeren",setSubjectActionLabel:"Onderwerp wijzigen",administratorMessageSubject:"Beheerder",userJoinedRoom:"%s komt de chat binnen.",userLeftRoom:"%s heeft de chat verlaten.",userHasBeenKickedFromRoom:"%s is verwijderd.",userHasBeenBannedFromRoom:"%s is geblokkeerd.",dateFormat:"dd.mm.yyyy",timeFormat:"HH:MM:ss",tooltipRole:"Moderator",tooltipIgnored:"Je negeert deze gebruiker",tooltipEmoticons:"Emotie-iconen",tooltipSound:"Speel een geluid af bij nieuwe priv berichten.",tooltipAutoscroll:"Automatisch scrollen",tooltipStatusmessage:"Statusberichten weergeven",tooltipAdministration:"Instellingen",tooltipUsercount:"Gebruikers",enterRoomPassword:'De Chatroom "%s" is met een wachtwoord beveiligd.',enterRoomPasswordSubmit:"Ga naar Chatroom",passwordEnteredInvalid:'Het wachtwoord voor de Chatroom "%s" is onjuist.',nicknameConflict:"De gebruikersnaam is reeds in gebruik. Probeer a.u.b. een andere gebruikersnaam.",errorMembersOnly:'Je kunt niet deelnemen aan de Chatroom "%s": Je hebt onvoldoende rechten.',errorMaxOccupantsReached:'Je kunt niet deelnemen aan de Chatroom "%s": Het maximum aantal gebruikers is bereikt.',antiSpamMessage:"Het is niet toegestaan om veel berichten naar de server te versturen. Je bent voor een korte periode geblokkeerd."},es:{status:"Estado: %s",statusConnecting:"Conectando...",statusConnected:"Conectado",statusDisconnecting:"Desconectando...",statusDisconnected:"Desconectado",statusAuthfail:"Fall la autenticacin",roomSubject:"Asunto:",messageSubmit:"Enviar",labelUsername:"Usuario:",labelPassword:"Clave:",loginSubmit:"Entrar",loginInvalid:"JID no vlido",reason:"Razn:",subject:"Asunto:",reasonWas:"La razn fue: %s.",kickActionLabel:"Expulsar",youHaveBeenKickedBy:"Has sido expulsado de %1$s por %2$s",youHaveBeenKicked:"Has sido expulsado de %s",banActionLabel:"Prohibir",youHaveBeenBannedBy:"Has sido expulsado permanentemente de %1$s por %2$s",youHaveBeenBanned:"Has sido expulsado permanentemente de %s",privateActionLabel:"Chat privado",ignoreActionLabel:"Ignorar",unignoreActionLabel:"No ignorar",setSubjectActionLabel:"Cambiar asunto",administratorMessageSubject:"Administrador",userJoinedRoom:"%s se ha unido a la sala.",userLeftRoom:"%s ha dejado la sala.",userHasBeenKickedFromRoom:"%s ha sido expulsado de la sala.",userHasBeenBannedFromRoom:"%s ha sido expulsado permanentemente de la sala.",dateFormat:"dd.mm.yyyy",timeFormat:"HH:MM:ss",tooltipRole:"Moderador",tooltipIgnored:"Ignoras a ste usuario",tooltipEmoticons:"Emoticonos",tooltipSound:"Reproducir un sonido para nuevos mensajes privados",tooltipAutoscroll:"Desplazamiento automtico",tooltipStatusmessage:"Mostrar mensajes de estado",tooltipAdministration:"Administracin de la sala",tooltipUsercount:"Usuarios en la sala",enterRoomPassword:'La sala "%s" est protegida mediante contrasea.',enterRoomPasswordSubmit:"Unirse a la sala",passwordEnteredInvalid:'Contrasea incorrecta para la sala "%s".',nicknameConflict:"El nombre de usuario ya est siendo utilizado. Por favor elija otro.",errorMembersOnly:'No se puede unir a la sala "%s": no tiene privilegios suficientes.',errorMaxOccupantsReached:'No se puede unir a la sala "%s": demasiados participantes.',antiSpamMessage:"Por favor, no hagas spam. Has sido bloqueado temporalmente."},cn:{status:": %s",statusConnecting:"...",statusConnected:"",statusDisconnecting:"...",statusDisconnected:"",statusAuthfail:"",roomSubject:":",messageSubmit:"",labelUsername:":",labelPassword:":",loginSubmit:"",loginInvalid:"",reason:":",subject:":",reasonWas:": %s.",kickActionLabel:"",youHaveBeenKickedBy:" %1$s  %2$s ",banActionLabel:"",youHaveBeenBannedBy:" %1$s  %2$s ",privateActionLabel:"",ignoreActionLabel:"",unignoreActionLabel:"",setSubjectActionLabel:"",administratorMessageSubject:"",userJoinedRoom:"%s ",userLeftRoom:"%s ",userHasBeenKickedFromRoom:"%s ",userHasBeenBannedFromRoom:"%s ",dateFormat:"dd.mm.yyyy",timeFormat:"HH:MM:ss",tooltipRole:"",tooltipIgnored:"",tooltipEmoticons:"",tooltipSound:"",tooltipAutoscroll:"",tooltipStatusmessage:"",tooltipAdministration:"",tooltipUsercount:"",enterRoomPassword:' "%s" .',enterRoomPasswordSubmit:"",passwordEnteredInvalid:' "%s" ',nicknameConflict:"",errorMembersOnly:' "%s" ',errorMaxOccupantsReached:' "%s" ',antiSpamMessage:" "},ja:{status:": %s",statusConnecting:"",statusConnected:"",statusDisconnecting:"",statusDisconnected:"",statusAuthfail:"",roomSubject:"",messageSubmit:"",labelUsername:"",labelPassword:"",loginSubmit:"",loginInvalid:"",reason:"",subject:"",reasonWas:": %s",kickActionLabel:"",youHaveBeenKickedBy:"%2$s%1$s",youHaveBeenKicked:"%s",banActionLabel:"",youHaveBeenBannedBy:"%2$s%1$s",youHaveBeenBanned:"%s",privateActionLabel:"",ignoreActionLabel:"",unignoreActionLabel:"",setSubjectActionLabel:"",administratorMessageSubject:"",userJoinedRoom:"%s",userLeftRoom:"%s",userHasBeenKickedFromRoom:"%s",userHasBeenBannedFromRoom:"%s",dateFormat:"dd.mm.yyyy",timeFormat:"HH:MM:ss",tooltipRole:"",tooltipIgnored:"",tooltipEmoticons:"",tooltipSound:"",tooltipAutoscroll:"",tooltipStatusmessage:"",tooltipAdministration:"",tooltipUsercount:"",enterRoomPassword:'"%s"',enterRoomPasswordSubmit:"",passwordEnteredInvalid:'"%s"',nicknameConflict:"",errorMembersOnly:'"%s": ',errorMaxOccupantsReached:'"%s": ',antiSpamMessage:""},sv:{status:"Status: %s",statusConnecting:"Ansluter...",statusConnected:"Ansluten",statusDisconnecting:"Kopplar frn...",statusDisconnected:"Frnkopplad",statusAuthfail:"Autentisering misslyckades",roomSubject:"mne:",messageSubmit:"Skicka",labelUsername:"Anvndarnamn:",labelPassword:"Lsenord:",loginSubmit:"Logga in",loginInvalid:"Ogiltigt JID",reason:"Anledning:",subject:"mne:",reasonWas:"Anledningen var: %s.",kickActionLabel:"Sparka ut",youHaveBeenKickedBy:"Du har blivit utsparkad frn %2$s av %1$s",youHaveBeenKicked:"Du har blivit utsparkad frn %s",banActionLabel:"Bannlys",youHaveBeenBannedBy:"Du har blivit bannlyst frn %1$s av %2$s",youHaveBeenBanned:"Du har blivit bannlyst frn %s",privateActionLabel:"Privat chatt",ignoreActionLabel:"Blockera",unignoreActionLabel:"Avblockera",setSubjectActionLabel:"ndra mne",administratorMessageSubject:"Administratr",userJoinedRoom:"%s kom in i rummet.",userLeftRoom:"%s har lmnat rummet.",userHasBeenKickedFromRoom:"%s har blivit utsparkad ur rummet.",userHasBeenBannedFromRoom:"%s har blivit bannlyst frn rummet.",dateFormat:"yyyy-mm-dd",timeFormat:"HH:MM:ss",tooltipRole:"Moderator",tooltipIgnored:"Du blockerar denna anvndare",tooltipEmoticons:"Smilies",tooltipSound:"Spela upp ett ljud vid nytt privat meddelande",tooltipAutoscroll:"Autoskrolla",tooltipStatusmessage:"Visa statusmeddelanden",tooltipAdministration:"Rumadministrering",tooltipUsercount:"Antal anvndare i rummet",enterRoomPassword:'Rummet "%s" r lsenordsskyddat.',enterRoomPasswordSubmit:"Anslut till rum",passwordEnteredInvalid:'Ogiltigt lsenord fr rummet "%s".',nicknameConflict:"Upptaget anvndarnamn. Var god vlj ett annat.",errorMembersOnly:'Du kan inte ansluta till rummet "%s": Otillrckliga rttigheter.',errorMaxOccupantsReached:'Du kan inte ansluta till rummet "%s": Rummet r fullt.',antiSpamMessage:"Var god avst frn att spamma. Du har blivit blockerad fr en kort stund."},fi:{status:"Status: %s",statusConnecting:"Muodostetaan yhteytt...",statusConnected:"Yhdistetty",statusDisconnecting:"Katkaistaan yhteytt...",statusDisconnected:"Yhteys katkaistu",statusAuthfail:"Autentikointi eponnistui",roomSubject:"Otsikko:",messageSubmit:"Lhet",labelUsername:"Kyttjtunnus:",labelNickname:"Nimimerkki:",labelPassword:"Salasana:",loginSubmit:"Kirjaudu sisn",loginInvalid:"Virheellinen JID",reason:"Syy:",subject:"Otsikko:",reasonWas:"Syy oli: %s.",kickActionLabel:"Potkaise",youHaveBeenKickedBy:"Nimimerkki %1$s potkaisi sinut pois huoneesta %2$s",youHaveBeenKicked:"Sinut potkaistiin pois huoneesta %s",banActionLabel:"Porttikielto",youHaveBeenBannedBy:"Nimimerkki %2$s antoi sinulle porttikiellon huoneeseen %1$s",youHaveBeenBanned:"Sinulle on annettu porttikielto huoneeseen %s",privateActionLabel:"Yksityinen keskustelu",ignoreActionLabel:"Hiljenn",unignoreActionLabel:"Peruuta hiljennys",setSubjectActionLabel:"Vaihda otsikkoa",administratorMessageSubject:"Yllpitj",userJoinedRoom:"%s tuli huoneeseen.",userLeftRoom:"%s lhti huoneesta.",userHasBeenKickedFromRoom:"%s potkaistiin pois huoneesta.",userHasBeenBannedFromRoom:"%s sai porttikiellon huoneeseen.",userChangedNick:"%1$s vaihtoi nimimerkikseen %2$s.",dateFormat:"dd.mm.yyyy",timeFormat:"HH:MM:ss",tooltipRole:"Yllpitj",tooltipIgnored:"Olet hiljentnyt tmn kyttjn",tooltipEmoticons:"Hymit",tooltipSound:"Soita nimerkki uusista yksityisviesteist",tooltipAutoscroll:"Automaattinen vieritys",tooltipStatusmessage:"Nyt statusviestit",tooltipAdministration:"Huoneen yllpito",tooltipUsercount:"Huoneen jsenet",enterRoomPassword:'Huone "%s" on suojattu salasanalla.',enterRoomPasswordSubmit:"Liity huoneeseen",passwordEnteredInvalid:'Virheelinen salasana huoneeseen "%s".',nicknameConflict:"Kyttjtunnus oli jo kytss. Valitse jokin toinen kyttjtunnus.",errorMembersOnly:'Et voi liitty huoneeseen "%s": ei oikeuksia.',errorMaxOccupantsReached:'Et voi liitty huoneeseen "%s": liian paljon jseni.',errorAutojoinMissing:'Parametria "autojoin" ei ole mritelty asetuksissa. Tee mrittely jatkaaksesi.',antiSpamMessage:"Ethn spmm. Sinut on nyt vliaikaisesti pistetty jhylle."},it:{status:"Stato: %s",statusConnecting:"Connessione...",statusConnected:"Connessione",statusDisconnecting:"Disconnessione...",statusDisconnected:"Disconnesso",statusAuthfail:"Autenticazione fallita",roomSubject:"Oggetto:",messageSubmit:"Invia",labelUsername:"Nome utente:",labelPassword:"Password:",loginSubmit:"Login",loginInvalid:"JID non valido",reason:"Ragione:",subject:"Oggetto:",reasonWas:"Ragione precedente: %s.",kickActionLabel:"Espelli",youHaveBeenKickedBy:"Sei stato espulso da %2$s da %1$s",youHaveBeenKicked:"Sei stato espulso da %s",banActionLabel:"Escluso",youHaveBeenBannedBy:"Sei stato escluso da %1$s da %2$s",youHaveBeenBanned:"Sei stato escluso da %s",privateActionLabel:"Stanza privata",ignoreActionLabel:"Ignora",unignoreActionLabel:"Non ignorare",setSubjectActionLabel:"Cambia oggetto",administratorMessageSubject:"Amministratore",userJoinedRoom:"%s si  unito alla stanza.",userLeftRoom:"%s ha lasciato la stanza.",userHasBeenKickedFromRoom:"%s  stato espulso dalla stanza.",userHasBeenBannedFromRoom:"%s  stato escluso dalla stanza.",dateFormat:"dd/mm/yyyy",timeFormat:"HH:MM:ss",tooltipRole:"Moderatore",tooltipIgnored:"Stai ignorando questo utente",tooltipEmoticons:"Emoticons",tooltipSound:"Riproduci un suono quando arrivano messaggi privati",tooltipAutoscroll:"Autoscroll",tooltipStatusmessage:"Mostra messaggi di stato",tooltipAdministration:"Amministrazione stanza",tooltipUsercount:"Partecipanti alla stanza",enterRoomPassword:'La stanza "%s"  protetta da password.',enterRoomPasswordSubmit:"Unisciti alla stanza",passwordEnteredInvalid:'Password non valida per la stanza "%s".',nicknameConflict:"Nome utente gi in uso. Scegline un altro.",errorMembersOnly:'Non puoi unirti alla stanza "%s": Permessi insufficienti.',errorMaxOccupantsReached:'Non puoi unirti alla stanza "%s": Troppi partecipanti.',antiSpamMessage:"Per favore non scrivere messaggi pubblicitari. Sei stato bloccato per un po' di tempo."},pl:{status:"Status: %s",statusConnecting:"cz...",statusConnected:"Poczone",statusDisconnecting:"Rozczam...",statusDisconnected:"Rozczone",statusAuthfail:"Nieprawidowa autoryzacja",roomSubject:"Temat:",messageSubmit:"Wylij",labelUsername:"Nazwa uytkownika:",labelNickname:"Ksywka:",labelPassword:"Haso:",loginSubmit:"Zaloguj",loginInvalid:"Nieprawidowy JID",reason:"Przyczyna:",subject:"Temat:",reasonWas:"Z powodu: %s.",kickActionLabel:"Wykop",youHaveBeenKickedBy:"Zostae wykopany z %2$s przez %1$s",youHaveBeenKicked:"Zostae wykopany z %s",banActionLabel:"Ban",youHaveBeenBannedBy:"Zostae zbanowany na %1$s przez %2$s",youHaveBeenBanned:"Zostae zbanowany na %s",privateActionLabel:"Rozmowa prywatna",ignoreActionLabel:"Zignoruj",unignoreActionLabel:"Przesta ignorowa",setSubjectActionLabel:"Zmie temat",administratorMessageSubject:"Administrator",userJoinedRoom:"%s wszed do pokoju.",userLeftRoom:"%s opuci pokj.",userHasBeenKickedFromRoom:"%s zosta wykopany z pokoju.",userHasBeenBannedFromRoom:"%s zosta zbanowany w pokoju.",userChangedNick:"%1$s zmieni ksywk na %2$s.",presenceUnknownWarningSubject:"Uwaga:",presenceUnknownWarning:"Rozmwca moe nie by poczony. Nie moemy ustali jego obecnoci.",dateFormat:"dd.mm.yyyy",timeFormat:"HH:MM:ss",tooltipRole:"Moderator",tooltipIgnored:"Ignorujesz tego rozmwc",tooltipEmoticons:"Emoty",tooltipSound:"Sygna dwikowy przy otrzymaniu wiadomoci",tooltipAutoscroll:"Autoprzewijanie",tooltipStatusmessage:"Wywietl statusy",tooltipAdministration:"Administrator pokoju",tooltipUsercount:"Obecni rozmwcy",enterRoomPassword:'Pokj "%s" wymaga hasa.',enterRoomPasswordSubmit:"Wejd do pokoju",passwordEnteredInvalid:'Niewaciwie haso do pokoju "%s".',nicknameConflict:"Nazwa w uyciu. Wybierz inn.",errorMembersOnly:'Nie moesz wej do pokoju "%s": Niepene uprawnienia.',
errorMaxOccupantsReached:'Nie moesz wej do pokoju "%s": Siedzi w nim zbyt wielu ludzi.',errorAutojoinMissing:"Konfiguracja nie zawiera parametru automatycznego wejcia do pokoju. Wska pokj do ktrego chcesz wej.",antiSpamMessage:"Please do not spam. You have been blocked for a short-time."},pt:{status:"Status: %s",statusConnecting:"Conectando...",statusConnected:"Conectado",statusDisconnecting:"Desligando...",statusDisconnected:"Desligado",statusAuthfail:"Falha na autenticao",roomSubject:"Assunto:",messageSubmit:"Enviar",labelUsername:"Usurio:",labelPassword:"Senha:",loginSubmit:"Entrar",loginInvalid:"JID invlido",reason:"Motivo:",subject:"Assunto:",reasonWas:"O motivo foi: %s.",kickActionLabel:"Excluir",youHaveBeenKickedBy:"Voc foi excluido de %1$s por %2$s",youHaveBeenKicked:"Voc foi excluido de %s",banActionLabel:"Bloquear",youHaveBeenBannedBy:"Voc foi excluido permanentemente de %1$s por %2$s",youHaveBeenBanned:"Voc foi excluido permanentemente de %s",privateActionLabel:"Bate-papo privado",ignoreActionLabel:"Ignorar",unignoreActionLabel:"No ignorar",setSubjectActionLabel:"Trocar Assunto",administratorMessageSubject:"Administrador",userJoinedRoom:"%s entrou na sala.",userLeftRoom:"%s saiu da sala.",userHasBeenKickedFromRoom:"%s foi excluido da sala.",userHasBeenBannedFromRoom:"%s foi excluido permanentemente da sala.",dateFormat:"dd.mm.yyyy",timeFormat:"HH:MM:ss",tooltipRole:"Moderador",tooltipIgnored:"Voc ignora este usurio",tooltipEmoticons:"Emoticons",tooltipSound:"Reproduzir o som para novas mensagens privados",tooltipAutoscroll:"Deslocamento automtico",tooltipStatusmessage:"Mostrar mensagens de status",tooltipAdministration:"Administrao da sala",tooltipUsercount:"Usurios na sala",enterRoomPassword:'A sala "%s"  protegida por senha.',enterRoomPasswordSubmit:"Junte-se  sala",passwordEnteredInvalid:'Senha incorreta para a sala "%s".',nicknameConflict:"O nome de usurio j est em uso. Por favor, escolha outro.",errorMembersOnly:'Voc no pode participar da sala "%s":  privilgios insuficientes.',errorMaxOccupantsReached:'Voc no pode participar da sala "%s": muitos participantes.',antiSpamMessage:"Por favor, no envie spam. Voc foi bloqueado temporariamente."},pt_br:{status:"Estado: %s",statusConnecting:"Conectando...",statusConnected:"Conectado",statusDisconnecting:"Desconectando...",statusDisconnected:"Desconectado",statusAuthfail:"Autenticao falhou",roomSubject:"Assunto:",messageSubmit:"Enviar",labelUsername:"Usurio:",labelPassword:"Senha:",loginSubmit:"Entrar",loginInvalid:"JID invlido",reason:"Motivo:",subject:"Assunto:",reasonWas:"Motivo foi: %s.",kickActionLabel:"Derrubar",youHaveBeenKickedBy:"Voc foi derrubado de %2$s por %1$s",youHaveBeenKicked:"Voc foi derrubado de %s",banActionLabel:"Banir",youHaveBeenBannedBy:"Voc foi banido de %1$s por %2$s",youHaveBeenBanned:"Voc foi banido de %s",privateActionLabel:"Conversa privada",ignoreActionLabel:"Ignorar",unignoreActionLabel:"No ignorar",setSubjectActionLabel:"Mudar Assunto",administratorMessageSubject:"Administrador",userJoinedRoom:"%s entrou na sala.",userLeftRoom:"%s saiu da sala.",userHasBeenKickedFromRoom:"%s foi derrubado da sala.",userHasBeenBannedFromRoom:"%s foi banido da sala.",dateFormat:"dd.mm.yyyy",timeFormat:"HH:MM:ss",tooltipRole:"Moderador",tooltipIgnored:"Voc ignora este usurio",tooltipEmoticons:"Emoticons",tooltipSound:"Tocar som para novas mensagens privadas",tooltipAutoscroll:"Auto-rolagem",tooltipStatusmessage:"Exibir mensagens de estados",tooltipAdministration:"Administrao de Sala",tooltipUsercount:"Participantes da Sala",enterRoomPassword:'Sala "%s"  protegida por senha.',enterRoomPasswordSubmit:"Entrar na sala",passwordEnteredInvalid:'Senha invida para sala "%s".',nicknameConflict:"Nome de usurio j em uso. Por favor escolha outro.",errorMembersOnly:'Voc no pode entrar na sala "%s": privilgios insuficientes.',errorMaxOccupantsReached:'Voc no pode entrar na sala "%s": mximo de participantes atingido.',antiSpamMessage:"Por favor, no faa spam. Voc foi bloqueado temporariamente."},ru:{status:": %s",statusConnecting:"...",statusConnected:"",statusDisconnecting:"...",statusDisconnected:"",statusAuthfail:" ",roomSubject:":",messageSubmit:"",labelUsername:":",labelNickname:":",labelPassword:":",loginSubmit:"",loginInvalid:" JID",reason:":",subject:":",reasonWas:" : %s.",kickActionLabel:"",youHaveBeenKickedBy:" %1$s     %2$s",youHaveBeenKicked:"    %s",banActionLabel:" ",youHaveBeenBannedBy:" %1$s      %2$s",youHaveBeenBanned:"     %s",privateActionLabel:"-- ",ignoreActionLabel:"",unignoreActionLabel:" ",setSubjectActionLabel:" ",administratorMessageSubject:"",userJoinedRoom:"%s   .",userLeftRoom:"%s   .",userHasBeenKickedFromRoom:"%s   .",userHasBeenBannedFromRoom:"%s    .",userChangedNick:"%1$s    %2$s.",presenceUnknownWarningSubject:":",presenceUnknownWarning:"    .",dateFormat:"dd.mm.yyyy",timeFormat:"HH:MM:ss",tooltipRole:"",tooltipIgnored:"   .",tooltipEmoticons:"",tooltipSound:"   ",tooltipAutoscroll:"-",tooltipStatusmessage:"  ",tooltipAdministration:"  ",tooltipUsercount:" ",enterRoomPassword:'  "%s"  .',enterRoomPasswordSubmit:"  ",passwordEnteredInvalid:'    "%s".',nicknameConflict:"   .    .",errorMembersOnly:'      "%s":   .',errorMaxOccupantsReached:'      "%s":   .',errorAutojoinMissing:"   .    .",antiSpamMessage:"   .     ."},ca:{status:"Estat: %s",statusConnecting:"Connectant...",statusConnected:"Connectat",statusDisconnecting:"Desconnectant...",statusDisconnected:"Desconnectat",statusAuthfail:"Ha fallat la autenticaci",roomSubject:"Assumpte:",messageSubmit:"Enviar",labelUsername:"Usuari:",labelPassword:"Clau:",loginSubmit:"Entrar",loginInvalid:"JID no vlid",reason:"Ra:",subject:"Assumpte:",reasonWas:"La ra ha estat: %s.",kickActionLabel:"Expulsar",youHaveBeenKickedBy:"Has estat expulsat de %1$s per %2$s",youHaveBeenKicked:"Has estat expulsat de %s",banActionLabel:"Prohibir",youHaveBeenBannedBy:"Has estat expulsat permanentment de %1$s per %2$s",youHaveBeenBanned:"Has estat expulsat permanentment de %s",privateActionLabel:"Xat privat",ignoreActionLabel:"Ignorar",unignoreActionLabel:"No ignorar",setSubjectActionLabel:"Canviar assumpte",administratorMessageSubject:"Administrador",userJoinedRoom:"%s ha entrat a la sala.",userLeftRoom:"%s ha deixat la sala.",userHasBeenKickedFromRoom:"%s ha estat expulsat de la sala.",userHasBeenBannedFromRoom:"%s ha estat expulsat permanentment de la sala.",dateFormat:"dd.mm.yyyy",timeFormat:"HH:MM:ss",tooltipRole:"Moderador",tooltipIgnored:"Ests ignorant aquest usuari",tooltipEmoticons:"Emoticones",tooltipSound:"Reproduir un so per a nous missatges",tooltipAutoscroll:"Desplaament automtic",tooltipStatusmessage:"Mostrar missatges d'estat",tooltipAdministration:"Administraci de la sala",tooltipUsercount:"Usuaris dins la sala",enterRoomPassword:'La sala "%s" est protegida amb contrasenya.',enterRoomPasswordSubmit:"Entrar a la sala",passwordEnteredInvalid:'Contrasenya incorrecta per a la sala "%s".',nicknameConflict:"El nom d'usuari ja s'est utilitzant. Si us plau, escolleix-ne un altre.",errorMembersOnly:'No pots unir-te a la sala "%s": no tens prous privilegis.',errorMaxOccupantsReached:'No pots unir-te a la sala "%s": hi ha masses participants.',antiSpamMessage:"Si us plau, no facis spam. Has estat bloquejat temporalment."},cs:{status:"Stav: %s",statusConnecting:"Pipojovn...",statusConnected:"Pipojeno",statusDisconnecting:"Odpojovn...",statusDisconnected:"Odpojeno",statusAuthfail:"Pihlen selhalo",roomSubject:"Pedmt:",messageSubmit:"Odeslat",labelUsername:"U. jmno:",labelNickname:"Pezdvka:",labelPassword:"Heslo:",loginSubmit:"Pihlsit se",loginInvalid:"Neplatn JID",reason:"Dvod:",subject:"Pedmt:",reasonWas:"Dvod byl: %s.",kickActionLabel:"Vykopnout",youHaveBeenKickedBy:"Byl jsi vylouen z %2$s uivatelem %1$s",youHaveBeenKicked:"Byl jsi vylouen z %s",banActionLabel:"Ban",youHaveBeenBannedBy:"Byl jsi trvale vylouen z %1$s uivatelem %2$s",youHaveBeenBanned:"Byl jsi trvale vylouen z %s",privateActionLabel:"Soukrom chat",ignoreActionLabel:"Ignorovat",unignoreActionLabel:"Neignorovat",setSubjectActionLabel:"Zmnit pedmt",administratorMessageSubject:"Adminitrtor",userJoinedRoom:"%s veel do mstnosti.",userLeftRoom:"%s opustil mstnost.",userHasBeenKickedFromRoom:"%s byl vylouen z mstnosti.",userHasBeenBannedFromRoom:"%s byl trvale vylouen z mstnosti.",userChangedNick:"%1$s si zmnil pezdvku na  %2$s.",presenceUnknownWarningSubject:"Poznmka:",presenceUnknownWarning:"Tento uivatel me bt offiline. Nememe sledovat jeho ptmonost..",dateFormat:"dd.mm.yyyy",timeFormat:"HH:MM:ss",tooltipRole:"Modertor",tooltipIgnored:"Tento uivatel je ignorovn",tooltipEmoticons:"Emotikony",tooltipSound:"Pehrt zvuk pi nov soukrom zprv",tooltipAutoscroll:"Automaticky rolovat",tooltipStatusmessage:"Zobrazovat stavov zprvy",tooltipAdministration:"Sprva mstnosti",tooltipUsercount:"Uivatel",enterRoomPassword:'Mstnost "%s" je chrnna heslem.',enterRoomPasswordSubmit:"Pipojit se do mstnosti",passwordEnteredInvalid:'Neplatn heslo pro mstnost "%s".',nicknameConflict:"Takov pihlaovac jmno je ji pouito. Vyberte si prosm jin.",errorMembersOnly:'Nemete se pipojit do mstnosti "%s": Nedostaten oprvnn.',errorMaxOccupantsReached:'Nemete se pipojit do mstnosti "%s": Pli mnoho uivatel.',errorAutojoinMissing:"Nen nastaven parametr autojoin. Nastavte jej prosm.",antiSpamMessage:"Nespamujte prosm. V et byl na chvilku zablokovn."},he:{status:": %s",statusConnecting:" ...",statusConnected:"",statusDisconnecting:" ...",statusDisconnected:"",statusAuthfail:" ",roomSubject:":",messageSubmit:"",labelUsername:" :",labelNickname:" :",labelPassword:":",loginSubmit:"",loginInvalid:"JID  ",reason:":",subject:":",reasonWas:" : %s.",kickActionLabel:"",youHaveBeenKickedBy:"  %2$s   %1$s",youHaveBeenKicked:"  %s",banActionLabel:"",youHaveBeenBannedBy:"  %1$s   %2$s",youHaveBeenBanned:"  %s",privateActionLabel:" ",ignoreActionLabel:"",unignoreActionLabel:" ",setSubjectActionLabel:" ",administratorMessageSubject:"",userJoinedRoom:"%s () .",userLeftRoom:"%s ()  .",userHasBeenKickedFromRoom:"%s ()  .",userHasBeenBannedFromRoom:"%s ()  .",userChangedNick:"%1$s ()   %2$s.",dateFormat:"dd.mm.yyyy",timeFormat:"HH:MM:ss",tooltipRole:"",tooltipIgnored:"   ",tooltipEmoticons:"",tooltipSound:"     ",tooltipAutoscroll:" ",tooltipStatusmessage:"  ",tooltipAdministration:" ",tooltipUsercount:" ",enterRoomPassword:' "%s"   .',enterRoomPasswordSubmit:" ",passwordEnteredInvalid:'   "%s".',nicknameConflict:"    .    .",errorMembersOnly:'    "%s":  .',errorMaxOccupantsReached:'    "%s":   .',errorAutojoinMissing:"     .     .",antiSpamMessage:"   .    ."}};
//# sourceMappingURL=candy.min.map